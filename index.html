<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BetAdvisor</title>

    <!-- Favicon and App Icons -->
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" href="/favicon.ico" sizes="any" />
    <link rel="shortcut icon" href="/favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <link rel="manifest" href="/site.webmanifest" />
    <meta name="apple-mobile-web-app-title" content="Betadvisor" />
    <meta name="description" content="Betadvisor: Top AI and Mathematical Sports Prediction Software and Investment Service">
    <link rel="manifest" href="/manifest.json">
    
    <!-- Content Security Policy (Updated for Vercel) -->
    <meta http-equiv="Content-Security-Policy" content="
        default-src 'self' https:;
        script-src 'self' 'unsafe-inline' 'unsafe-eval' https: https://www.gstatic.com https://cdn.jsdelivr.net https://pagead2.googlesyndication.com https://platform-api.sharethis.com https://vip.betadvisor.club https://ntfy.sh;
        style-src 'self' 'unsafe-inline' https: https://fonts.googleapis.com;
        img-src 'self' data: https:;
        font-src 'self' https: https://fonts.gstatic.com;
        connect-src 'self' https: https://raw.githubusercontent.com https://node-328ce-default-rtdb.firebaseio.com https://vip.betadvisor.club https://ntfy.sh https://api.allorigins.win;
        frame-src 'self' https:;
    ">
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" as="style">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <!-- --- CSS for "Clear and Minimal Small" Aesthetic --- -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        :root{
            --primary:#126e51;--primary-dark:#0d5940;--secondary:#027b5b;--accent:#ffdf1b;
            --accent-dark:#e6c400;--bg-dark:#1c2529;--bg-medium:#212a2d;--bg-light:#374345;
            --text-light:#f8f9fa;--text-muted:#b0b6bc;--win:#4caf50;--loss:#f44336;
            --pending:#6c757d;--border-color:#495057;--border-radius:.3rem;
            --box-shadow:0 2px 8px rgba(0,0,0,.2);--transition:all .25s ease-in-out;
            --accent-light:rgba(255, 223, 27, 0.2);
            margin:0;padding:0;
        }
        *{margin:0;padding:0;box-sizing:border-box;}
        body{
            background-color:var(--bg-dark);color:var(--text-light);
            font-family:'Inter',sans-serif;line-height:1.5;overflow-x:hidden;margin:0;padding:0;
        }
        .container{max-width:1200px;margin:0 auto;}
        
        /* Promotional Sticky Bar */
        .landing-cta {
            position: sticky;
            top: 0;
            z-index: 1001;
            background: linear-gradient(45deg, var(--accent), var(--secondary));
            padding: 10px 20px;
            text-align: center;
            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
            animation: glow 2s infinite;
        }
        .landing-cta .promo-cta {
            color: var(--bg-dark);
            text-decoration: none;
            font-weight: 700;
            font-size: 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            transition: transform 0.2s;
        }
        .landing-cta .promo-cta:hover {
            transform: scale(1.05);
        }
        @keyframes glow {
            0%, 100% { box-shadow: 0 0 10px var(--accent); }
            50% { box-shadow: 0 0 20px var(--accent); }
        }
        
        /* Enhanced Stat Cards with Clickability */
        .stat-card {
            cursor: pointer;
            position: relative;
            transition: transform 0.2s, box-shadow 0.2s;
            user-select: none;
        }
        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
        .stat-card::after {
            content: 'ℹ️';
            position: absolute;
            top: 8px;
            right: 8px;
            opacity: 0;
            transition: opacity 0.2s;
            font-size: 0.8rem;
        }
        .stat-card:hover::after {
            opacity: 1;
        }
        .stat-card:active {
            transform: scale(0.98);
            transition: transform 0.1s;
        }
        .stat-hint {
            font-size: 0.7rem;
            color: var(--text-muted);
            margin-top: 5px;
            opacity: 0;
            transition: opacity 0.3s;
        }
        .stat-card:hover .stat-hint {
            opacity: 1;
        }
        .trend {
            font-size: 0.8rem;
            font-weight: 600;
            margin-left: 5px;
        }
        
        /* Filter Feedback Improvements */
        .filter-feedback {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: var(--primary);
            color: white;
            padding: 10px 20px;
            border-radius: 20px;
            z-index: 1002;
            font-weight: 600;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
        }
        #filter-summary {
            background: var(--bg-medium);
            padding: 10px 15px;
            border-radius: var(--border-radius);
            margin-bottom: 15px;
            font-size: 0.9rem;
            color: var(--accent);
            border-left: 3px solid var(--accent);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        #live-counter {
            background: var(--accent);
            color: var(--bg-dark);
            padding: 3px 10px;
            border-radius: 10px;
            font-weight: 700;
            font-size: 0.9rem;
        }
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        .pulse {
            animation: pulse 0.5s ease;
        }
        
        /* Enhanced Prediction Cards */
        .prediction-card {
            cursor: pointer;
            transition: all 0.2s ease;
            position: relative;
            overflow: hidden;
        }
        .prediction-card:hover {
            background-color: var(--bg-light);
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.3);
        }
        .prediction-card:active {
            transform: translateY(0);
        }
        .prediction-card::before {
            content: 'Click for details';
            position: absolute;
            bottom: 10px;
            right: 10px;
            font-size: 0.7rem;
            color: var(--text-muted);
            opacity: 0;
            transition: opacity 0.3s;
        }
        .prediction-card:hover::before {
            opacity: 1;
        }
        @keyframes filterPulse {
            0% { background-color: transparent; }
            50% { background-color: var(--accent-light); }
            100% { background-color: transparent; }
        }
        .prediction-card.filter-match {
            animation: filterPulse 0.5s ease;
        }
        
        /* Metric Explanation Modal */
        #sportsMetricModal, #system2MetricModal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            backdrop-filter: blur(8px);
            z-index: 10000;
            align-items: center;
            justify-content: center;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }
        #sportsMetricModal .modal-content, #system2MetricModal .modal-content {
            background: var(--bg-medium);
            padding: 30px;
            border-radius: 15px;
            max-width: 500px;
            width: 90%;
            box-shadow: 0 25px 50px -12px rgba(0,0,0,0.5);
            border: 2px solid var(--accent);
        }
        #sportsMetricModalTitle, #system2MetricModalTitle {
            color: var(--accent);
            font-size: 1.5rem;
            margin-bottom: 20px;
            text-align: center;
        }
        #sportsMetricModalContent, #system2MetricModalContent {
            color: var(--text-light);
            line-height: 1.6;
            margin-bottom: 25px;
        }
        .metric-value {
            font-size: 2.5rem;
            text-align: center;
            margin: 20px 0;
            color: var(--accent);
            font-weight: 700;
        }
        
        /* Quick Preview Modal - Unified for both sections */
        #sportsPreviewModal, #system2PreviewModal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 10001;
            align-items: center;
            justify-content: center;
        }
        .preview-content {
            background: var(--bg-medium);
            padding: 30px;
            border-radius: 15px;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 25px 50px -12px rgba(0,0,0,0.5);
        }
        
        /* Quick Preview Button */
        .btn-preview {
            background: var(--accent);
            color: var(--bg-dark);
            border: none;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 0.9rem;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 5px;
        }
        .btn-preview:hover {
            background: var(--accent-dark);
            transform: scale(1.05);
        }
        
        /* Promo Highlight */
        .promo-highlight {
            background: linear-gradient(45deg, var(--accent), gold);
            padding: 10px 20px;
            border-radius: 25px;
            display: inline-block;
            margin: 10px 0;
            font-weight: 700;
            animation: glow 2s infinite;
        }
        
        /* Loading state for filters */
        .filtering {
            position: relative;
            opacity: 0.7;
        }
        .filtering::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 40px;
            height: 40px;
            border: 3px solid var(--accent);
            border-top-color: transparent;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            to { transform: translate(-50%, -50%) rotate(360deg); }
        }
        
        /* Toast Notifications */
        .toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: var(--primary);
            color: white;
            padding: 12px 24px;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            z-index: 1003;
            animation: slideIn 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        /* Continue with existing styles... */
        header{
            display:flex;justify-content:space-between;align-items:center;
            padding:clamp(.5rem,1.5vw,.75rem);background-color:var(--bg-medium);
            border-radius:var(--border-radius);margin-bottom:1rem;box-shadow:var(--box-shadow);
            flex-wrap:wrap;gap:clamp(.5rem,1.5vw,.75rem);
        }
        header .brand svg{
            width:clamp(1.75rem,4vw,2.25rem);height:clamp(1.75rem,4vw,2.25rem);
            color:var(--accent);
        }
        header .brand-title{
            font-size:clamp(0.75rem,1.5vw,0.875rem);font-weight:600;
        }
        header .right-section,.brand{display:flex;align-items:center;gap:.5rem;}
        header .right-section{gap:clamp(.5rem,1.5vw,.75rem);}
        .countdown-link{
            color:var(--accent);text-decoration:none;font-weight:500;font-size:.8rem;
            display:flex;align-items:center;gap:.25rem;background-color:var(--bg-light);
            padding:.3rem .6rem;border-radius:2rem;transition:var(--transition);
        }
        .countdown-link:hover{background-color:var(--primary);color:var(--text-light);}
        .countdown-label{color:var(--text-muted);margin-right:.25rem;}
        .nav-toggle{
            display:flex;align-items:center;gap:.4rem;background-color:var(--primary);
            border:none;color:var(--text-light);cursor:pointer;padding:.4rem .8rem;
            border-radius:var(--border-radius);transition:background-color var(--transition);
        }
        .nav-toggle:hover{background-color:var(--primary-dark);}
        .nav-toggle .filter-text{font-weight:600;font-size:.9rem;}
        .nav-toggle svg{width:1rem;height:1rem;}
        .filters{
            display:none;background:var(--bg-medium);padding:.8rem;
            border-radius:var(--border-radius);margin-bottom:1rem;
            grid-template-columns:1fr;gap:.75rem;
        }
        .filters.active{display:grid;}
        .filter-item{display:flex;flex-direction:column;gap:.4rem;}
        .filter-item label{
            font-size:.8rem;font-weight:500;color:var(--text-muted);
        }
        .filter-item select,.filter-item input[type="text"],.filter-item input[type="number"]{
            padding:.5rem .75rem;border:1px solid var(--border-color);
            background-color:var(--bg-dark);color:var(--text-light);
            border-radius:.25rem;font-size:.9rem;transition:var(--transition);
            width:100%;-webkit-appearance:none;-moz-appearance:none;appearance:none;
        }
        .filter-item select:focus,.filter-item input[type="text"]:focus,.filter-item input[type="number"]:focus{
            outline:none;border-color:var(--accent);box-shadow:0 0 0 2px rgba(255,223,27,.2);
        }
        .search{position:relative;}
        .search svg{
            position:absolute;left:.75rem;top:50%;transform:translateY(-50%);
            color:var(--text-muted);width:1rem;height:1rem;
        }
        .search input{padding-left:2.5rem;}
        #refresh-btn{
            display:inline-flex;align-items:center;justify-content:center;
            gap:.25rem;padding:.25rem .5rem;background-color:var(--accent);
            color:var(--bg-dark);border:none;border-radius:.25rem;font-weight:500;
            cursor:pointer;transition:var(--transition);font-size:.8rem;line-height:1;
            vertical-align:middle;
        }
        #refresh-btn:hover{background-color:var(--accent-dark);}
        .stats{
            display:grid;grid-template-columns:repeat(auto-fit,minmax(70px,1fr));
            gap:.5rem;margin-bottom:1rem;
        }
        .date{
            background-color:var(--primary);color:var(--text-light);
            padding:.5rem .8rem;font-weight:600;font-size:.9rem;
            text-align:center;cursor:default;user-select:none;
            pointer-events:none;opacity:0.9;
        }
        .match{padding:.8rem;border-bottom:1px solid var(--border-color);}
        .match:last-of-type{border-bottom:none;}
        .team{
            display:block;font-weight:600;margin-bottom:.5rem;
            color:var(--text-light);font-size:.95rem;
        }
        .league,.prediction{
            display:inline-block;font-size:.75rem;padding:.2rem .5rem;
            border-radius:1rem;font-weight:500;
        }
        .league{
            background-color:var(--bg-light);color:var(--text-muted);
        }
        .prediction{
            background-color:var(--accent);color:var(--bg-dark);
        }
        .confidence,.odds,.score,.result{
            font-size:.8rem;color:var(--text-muted);
        }
        .score{font-weight:600;color:var(--text-light);}
        .result{font-weight:600;}
        .bet-info{
            background-color:var(--bg-dark);padding:.75rem;
            display:flex;flex-wrap:wrap;gap:.75rem;
            justify-content:space-between;align-items:center;
        }
        .bet-type,.bet-odds,.bet-result,.bet-profit{
            font-size:.85rem;font-weight:500;color:var(--text-muted);
        }
        .loading,.error,.no-predictions{
            text-align:center;padding:1.5rem;
            background-color:var(--bg-medium);border-radius:var(--border-radius);
        }
        .loading{color:var(--accent);}
        .error{color:var(--loss);}
        .no-predictions{color:var(--text-muted);}
        .contact-card,.faq-section,footer{
            background-color:var(--bg-medium);border-radius:var(--border-radius);
            padding:1.25rem;margin-top:1rem;box-shadow:var(--box-shadow);
        }
        .card-title{
            font-size:1.3rem;font-weight:700;margin-bottom:.8rem;color:var(--text-light);
        }
        .card-description{
            color:var(--text-muted);margin-bottom:1rem;
        }
        .contact-item{
            display:flex;align-items:center;margin-bottom:.75rem;
            padding:.75rem;background-color:var(--bg-light);border-radius:var(--border-radius);
        }
        .contact-icon{
            background:var(--primary);width:2.5rem;height:2.5rem;border-radius:50%;
            display:flex;align-items:center;justify-content:center;margin-right:.75rem;
            flex-shrink:0;font-weight:700;
        }
        .contact-content h3{
            font-size:1rem;font-weight:600;margin-bottom:.2rem;
        }
        .contact-content p{color:var(--text-muted);}
        .contact-content a{
            color:var(--accent);text-decoration:none;transition:var(--transition);
        }
        .contact-content a:hover{text-decoration:underline;}
        .footer-text{
            text-align:center;margin-top:1rem;font-size:.8rem;color:var(--text-muted);
        }
        .btn-primary{
            background:var(--accent);color:var(--bg-dark);border:0;padding:.6rem 1.2rem;
            border-radius:var(--border-radius);font-weight:600;cursor:pointer;
            transition:var(--transition);display:inline-block;text-align:center;
            text-decoration:none;
        }
        .btn-primary:hover{background:var(--accent-dark);}
        .payment-options{
            display:flex;flex-direction:column;gap:1rem;margin:1rem 0;
        }
        .qr-code{
            width:8rem;height:8rem;background:#fff;padding:.4rem;
            border-radius:var(--border-radius);margin:0 auto;
        }
        .resources-container{
            height:350px;border-radius:var(--border-radius);margin:1rem 0;overflow:hidden;
        }
        .resources-frame{
            width:100%;height:100%;border:0;
        }
        .responsible-betting,.footer-links{
            text-align:center;margin-bottom:1rem;
        }
        .responsible-betting h3{margin-bottom:.5rem;}
        .responsible-betting p{color:var(--text-muted);font-size:.85rem;}
        .social-links{
            display:flex;gap:.75rem;justify-content:center;
        }
        .social-link{
            background:var(--bg-light);border-radius:50%;width:2.25rem;height:2.25rem;
            display:flex;align-items:center;justify-content:center;
            transition:var(--transition);color:var(--accent);
        }
        .social-link:hover{transform:translateY(-2px);background:var(--primary);}
        .social-link svg{width:1rem;height:1rem;}
        .faq-header{
            padding-bottom:.8rem;margin-bottom:.8rem;border-bottom:1px solid var(--border-color);
        }
        .faq-title{font-size:1.1rem;font-weight:600;color:var(--accent);}
        .faq-item{border-bottom:1px solid var(--border-color);}
        .faq-item:last-child{border-bottom:none;}
        .faq-item input[type="checkbox"]{display:none;}
        .faq-item label{
            display:flex;justify-content:space-between;align-items:center;
            padding:.8rem 0;cursor:pointer;font-size:.95rem;font-weight:500;
            transition:var(--transition);
        }
        .faq-item label:hover{color:var(--accent);}
        .faq-arrow{transition:transform .3s ease;}
        .faq-answer{
            overflow:hidden;max-height:0;transition:max-height .3s ease-in-out;
        }
        .faq-answer-content{
            padding-bottom:.8rem;color:var(--text-muted);
        }
        .faq-answer-content a{color:var(--accent);}
        .faq-item input:checked~.faq-answer{max-height:20rem;}
        .faq-item input:checked~label .faq-arrow{transform:rotate(180deg);}
        .faq-item input:checked~label{color:var(--accent);}
        ::-webkit-scrollbar{width:8px;}
        ::-webkit-scrollbar-track{background:var(--bg-dark);}
        ::-webkit-scrollbar-thumb{background:var(--primary);border-radius:4px;}
        ::-webkit-scrollbar-thumb:hover{background:var(--secondary);}
        .tab-container{
            max-width:1000px;margin:0 auto;background:#2c2c2c;
            border-radius:8px;border:1px solid #3a3a3a;
            box-shadow:0 4px 20px rgba(0,0,0,.4);overflow:hidden;
        }
        .tab-header{
            position:relative;background:linear-gradient(135deg,#027B5B 0%,#F9DC1C 100%);
            padding:0;overflow:hidden;
        }
        .tab-scroll-container{
            overflow-x:auto;overflow-y:hidden;scrollbar-width:thin;
            scrollbar-color:rgba(255,255,255,.3) transparent;
        }
        .tab-scroll-container::-webkit-scrollbar{height:3px;}
        .tab-scroll-container::-webkit-scrollbar-track{background:rgba(0,0,0,.2);}
        .tab-scroll-container::-webkit-scrollbar-thumb{
            background:rgba(255,255,255,.4);border-radius:2px;
        }
        .tab-nav{display:flex;min-width:fit-content;}
        .tab-button{
            background:none;border:none;color:rgba(255,255,255,.9);
            font-size:13px;font-weight:600;padding:14px 20px;cursor:pointer;
            transition:all .25s ease;white-space:nowrap;position:relative;
            text-transform:uppercase;letter-spacing:.5px;
        }
        .tab-button:hover{color:#ffffff;background:rgba(255,255,255,.15);transform:translateY(-1px);}
        .tab-button.active{
            color:#027B5B;background:#ffffff;border-radius:6px 6px 0 0;
            box-shadow:0 -2px 8px rgba(0,0,0,.2);
        }
        .tab-button.active::before{
            content:'';position:absolute;bottom:0;left:0;right:0;height:3px;background:#F9DC1C;
        }
        .scroll-indicator{
            position:absolute;top:50%;transform:translateY(-50%);
            background:rgba(0,0,0,.3);border:1px solid rgba(255,255,255,.2);
            color:white;width:32px;height:32px;border-radius:4px;cursor:pointer;
            display:flex;align-items:center;justify-content:center;
            font-size:14px;font-weight:bold;transition:all .2s ease;z-index:10;
        }
        .scroll-indicator:hover{background:rgba(0,0,0,.5);border-color:#F9DC1C;color:#F9DC1C;}
        .scroll-left{left:8px;}
        .scroll-right{right:8px;}
        .tab-content{padding:18px;min-height:140px;background:#2c2c2c;}
        .tab-panel{display:none;}
        .tab-panel.active{display:block;animation:fadeIn .3s ease;}
        @keyframes fadeIn{
            from{opacity:0;transform:translateY(8px);}
            to{opacity:1;transform:translateY(0);}
        }
        .content-card{
            background:#1a1a1a;border-radius:6px;padding:18px;
            border-left:1px solid #F9DC1C;border-top:1px solid #3a3a3a;
        }
        .content-title{
            font-weight:700;color:#F9DC1C;margin-bottom:10px;
            text-transform:uppercase;letter-spacing:.5px;
        }
        .content-text{
            color:#cccccc;line-height:1.5;font-size:13px;margin-bottom:14px;
        }
        .feature-grid{
            display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));
            gap:10px;margin-top:14px;
        }
        .feature-item{
            background:#027B5B;padding:10px 14px;border-radius:4px;
            font-size:12px;font-weight:600;color:#ffffff;display:flex;
            align-items:center;gap:8px;transition:all .2s ease;cursor:pointer;
            border:1px solid transparent;
        }
        .feature-item:hover{
            background:#F9DC1C;color:#027B5B;border-color:#027B5B;transform:translateY(-1px);
        }
        .feature-item::before{content:'⚡';font-size:14px;color:#F9DC1C;}
        .feature-item:hover::before{color:#027B5B;}
        .stats-bar{
            background:linear-gradient(90deg,#027B5B,#F9DC1C);
            height:2px;width:100%;margin:12px 0;border-radius:1px;
        }
        .skeleton{
            background-color:#e2e8f0;border-radius:.25rem;position:relative;overflow:hidden;
        }
        .skeleton::before{
            content:"";position:absolute;top:0;left:0;height:100%;width:150px;
            background:linear-gradient(90deg,transparent,rgba(255,255,255,.4),transparent);
            animation:shimmer 1.5s infinite;
        }
        @keyframes shimmer{
            0%{transform:translateX(-150px);}
            100%{transform:translateX(100%);}
        }
        .skeleton-text{height:1em;width:75%;}
        .skeleton-stat{height:24px;width:60px;margin:0 auto;}
        .skeleton-card{
            background-color:#fff;border:1px solid #e2e8f0;border-radius:8px;
            padding:1rem;margin-bottom:1rem;
        }
        .skeleton-card .skeleton{margin-bottom:.75rem;}
        .skeleton-card .skeleton-line-sm{width:40%;height:1rem;}
        .skeleton-card .skeleton-line-md{width:70%;height:1rem;}
        .skeleton-card .skeleton-line-lg{width:90%;height:1rem;}
        .skeleton-card .skeleton-line-xs{width:25%;height:.8rem;}
        .skeleton-card .flex{display:flex;gap:1rem;align-items:center;}
        #ma-matchDataSection{
            font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;
            margin:20px;color:#e0e0e0;background-color:#1a1a1a;padding:20px;
            border-radius:8px;max-width:1200px;margin-left:auto;margin-right:auto;
        }
        #ma-matchDataSection h1{
            font-size:1.8em;margin-bottom:20px;color:#ffffff;text-align:center;
        }
        .ma-dropdown-container{
            margin-bottom:5px;display:flex;align-items:center;gap:5px;font-size:small;
        }
        label{color:#b0b0b0;}
        select{
            padding:8px;font-size:1em;border-radius:6px;border:1px solid #444;
            background-color:#2a2a2a;color:#e0e0e0;cursor:pointer;
        }
        .ma-tab-container{display:flex;gap:10px;margin-bottom:20px;}
        .ma-tab-button{
            padding:10px 20px;border:none;cursor:pointer;border-radius:6px;
            background:#2a2a2a;color:#e0e0e0;font-weight:bold;
        }
        .ma-tab-button.active{background:#1e90ff;color:#fff;}
        .ma-table-wrapper{overflow-x:auto;}
        table{
            width:100%;border-collapse:collapse;margin:20px 0;
            background-color:#222;border:1px solid #333;
        }
        th,td{padding:12px;text-align:left;border-bottom:1px solid #333;}
        th{background-color:#2a2a2a;text-transform:uppercase;}
        tr:nth-child(even){background-color:#262626;}
        tr:hover{background-color:#333;}
        .ma-summary{background-color:#1e3a8a;font-weight:600;color:#ffffff;}
        .ma-month-header{
            font-size:1.4em;margin:30px 0 10px;color:#ffffff;font-weight:500;
        }
        .ma-error{color:#ff5555;text-align:center;}
        .range-inputs{
            display:flex;gap:.5rem;align-items:center;
        }
        .range-inputs input{flex:1;min-width:0;}
        .range-inputs span{color:var(--text-muted);font-size:.8rem;white-space:nowrap;}
        .st-sticky-share-buttons img,[class*="sharethis"] img,.st-toggle img{
            width:20px !important;height:20px !important;
        }
        @media (min-width:768px){
            .container{padding:1.25rem;}
            .nav-toggle{display:none;}
            .filters{
                display:grid;grid-template-columns:repeat(auto-fill,minmax(160px,1fr));
                gap:1rem;
            }
            .search{grid-column:span 2;}
            #refresh-btn{grid-column:1/-1;}
            #predictions-container{
                grid-template-columns:repeat(auto-fill,minmax(300px,1fr));
            }
            .payment-options{flex-direction:row;gap:1.5rem;}
            .paypal-container,.qr-container{flex:1;}
            .card-title{font-size:1.5rem;}
        }
        @media (min-width:1024px){
            #predictions-container{grid-template-columns:repeat(3,1fr);}
            .resources-container{height:450px;}
        }
        @media (max-width:640px){
            .tab-button{padding:12px 16px;font-size:11px;letter-spacing:.3px;}
            .tab-content{padding:1px;}
            .feature-grid{grid-template-columns:1fr 1fr;}
        }
        @media (max-width:600px){
            #ma-matchDataSection{margin:10px;padding:1px;}
            th,td{padding:1px;font-size:.75em;}
        }
    </style>

    <!-- External Tracking and Ad Scripts (Async) -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8692118545628405"
        crossorigin="anonymous"></script>
    <script type="text/javascript">
        (function (c, l, a, r, i, t, y) {
            c[a] = c[a] || function () { (c[a].q = c[a].q || []).push(arguments) };
            t = l.createElement(r); t.async = 1; t.src = "https://www.clarity.ms/tag/" + i;
            y = l.getElementsByTagName(r)[0]; y.parentNode.insertBefore(t, y);
        })(window, document, "clarity", "script", "t1uasnjs80");
    </script>
    <script type='text/javascript'
        src='https://platform-api.sharethis.com/js/sharethis.js#property=5ac6c5dace89f0001364228a&product=inline-share-buttons'
        async='async'></script>
</head>

<body>

    <!-- ===== PERFORMANCE OPTIMIZATION: CACHE SERVICE ===== -->
    <script>
        // Centralized Cache Service for API responses
        const CacheService = {
            storageKeyPrefix: 'betadvisor_cache_',
            defaultTTL: 15 * 60 * 1000, // 15 minutes

            get(key) {
                try {
                    const item = localStorage.getItem(this.storageKeyPrefix + key);
                    if (!item) return null;
                    
                    const data = JSON.parse(item);
                    if (Date.now() > data.expiry) {
                        localStorage.removeItem(this.storageKeyPrefix + key);
                        return null;
                    }
                    return data.value;
                } catch (e) {
                    console.warn('Cache read error:', e);
                    return null;
                }
            },

            set(key, value, ttl = this.defaultTTL) {
                try {
                    const data = {
                        value,
                        expiry: Date.now() + ttl
                    };
                    localStorage.setItem(this.storageKeyPrefix + key, JSON.stringify(data));
                    return true;
                } catch (e) {
                    console.warn('Cache write error:', e);
                    return false;
                }
            },

            async fetchWithCache(key, fetchFn, ttl = this.defaultTTL) {
                const cached = this.get(key);
                if (cached) return cached;
                
                const data = await fetchFn();
                this.set(key, data, ttl);
                return data;
            },

            invalidate(key) {
                localStorage.removeItem(this.storageKeyPrefix + key);
            },

            clear() {
                Object.keys(localStorage)
                    .filter(k => k.startsWith(this.storageKeyPrefix))
                    .forEach(k => localStorage.removeItem(k));
            }
        };

        // CORS Proxy Function - FIXED VERSION
        const corsProxy = (url) => {
            // Use CORS proxy for GitHub raw URLs and other external resources
            if (url.includes('raw.githubusercontent.com')) {
                return `https://api.allorigins.win/raw?url=${encodeURIComponent(url)}`;
            }
            return url;
        };

        // Unified Initialization Manager (replaces multiple DOMContentLoaded listeners)
        const InitializationManager = {
            initialized: false,
            initializationQueue: [],

            init(fn) {
                if (this.initialized) {
                    fn();
                } else {
                    this.initializationQueue.push(fn);
                }
            },

            run() {
                if (this.initialized) return;
                this.initialized = true;
                this.initializationQueue.forEach(fn => fn());
                this.initializationQueue = [];
            }
        };

        // Firebase Singleton (prevents duplicate initialization)
        const FirebaseService = (() => {
            let app = null;
            let database = null;

            return {
                init(config) {
                    if (app) return { app, database }; // Already initialized
                    
                    // Dynamically import Firebase
                    return import("https://www.gstatic.com/firebasejs/11.6.0/firebase-app.js")
                        .then(({ initializeApp }) => {
                            app = initializeApp(config);
                            return import("https://www.gstatic.com/firebasejs/11.6.0/firebase-database.js");
                        })
                        .then(({ getDatabase }) => {
                            database = getDatabase(app);
                            return { app, database };
                        });
                },
                getDatabase() {
                    if (!database) throw new Error('Firebase not initialized');
                    return database;
                },
                isReady() {
                    return database !== null;
                }
            };
        })();

        // Request Idle Callback wrapper for non-critical loads
        const LazyLoader = {
            queue: [],
            initialized: false,

            init() {
                if (this.initialized) return;
                this.initialized = true;
                
                if ('requestIdleCallback' in window) {
                    const processQueue = (deadline) => {
                        while (this.queue.length > 0 && deadline.timeRemaining() > 10) {
                            const item = this.queue.shift();
                            if (item) item();
                        }
                        if (this.queue.length > 0) {
                            window.requestIdleCallback(processQueue);
                        }
                    };
                    window.requestIdleCallback(processQueue);
                } else {
                    // Fallback for browsers without requestIdleCallback
                    setTimeout(() => {
                        this.queue.forEach(fn => fn());
                        this.queue = [];
                    }, 100);
                }
            },

            load(fn) {
                this.init();
                this.queue.push(fn);
            }
        };

        // DOM Fragment Cache for repeated operations
        const DOMOptimizer = {
            createFragment(html) {
                const template = document.createElement('template');
                template.innerHTML = html;
                return template.content;
            },

            // Batch DOM operations using DocumentFragment
            batchAppend(container, items, itemRenderer) {
                const fragment = document.createDocumentFragment();
                items.forEach(item => {
                    const element = itemRenderer(item);
                    fragment.appendChild(element);
                });
                container.appendChild(fragment);
            }
        };
        
        // Dead Click Tracker
        const DeadClickTracker = {
            init() {
                document.addEventListener('click', function(e) {
                    const target = e.target;
                    const isInteractive = target.closest('a') || 
                                          target.closest('button') || 
                                          target.closest('[role="button"]') ||
                                          target.closest('.stat-card') ||
                                          target.closest('.prediction-card');
                    
                    if (!isInteractive) {
                        const elementPath = DeadClickTracker.getElementPath(target);
                        console.log('Potential dead click on:', elementPath);
                        
                        // Send to analytics if available
                        if (typeof ga !== 'undefined') {
                            ga('send', 'event', 'DeadClick', elementPath, window.location.pathname);
                        }
                    }
                });
            },
            
            getElementPath(element) {
                const path = [];
                while (element && element.nodeType === Node.ELEMENT_NODE) {
                    let selector = element.nodeName.toLowerCase();
                    if (element.id) {
                        selector += '#' + element.id;
                        path.unshift(selector);
                        break;
                    } else {
                        let sibling = element;
                        let nth = 1;
                        while (sibling = sibling.previousElementSibling) {
                            if (sibling.nodeName.toLowerCase() === selector) nth++;
                        }
                        if (nth !== 1) selector += ":nth-of-type("+nth+")";
                    }
                    path.unshift(selector);
                    element = element.parentNode;
                }
                return path.join(" > ");
            }
        };
        
        // Initialize dead click tracking
        DeadClickTracker.init();
        
        // Global Metric Modal Functions
        window.showSportsMetricDetails = function(metricName, element) {
            const metricValue = element ? element.querySelector('.pred-stat-value').textContent : '-';
            const modal = document.getElementById('sportsMetricModal');
            const title = document.getElementById('sportsMetricModalTitle');
            const content = document.getElementById('sportsMetricModalContent');
            
            title.textContent = metricName;
            
            const explanations = {
                'Total Bets': 'Total number of bets placed. Track your betting volume and activity level over time.',
                'Avg Confidence': 'Average AI confidence score (0-100%). Higher scores indicate more reliable predictions based on historical data patterns.',
                'Highest Odds': 'Maximum odds selected in your bets. Higher odds mean higher potential returns but greater risk.',
                'Lowest Odds': 'Minimum odds selected. Lower odds typically indicate safer bets with higher probability of winning.',
                'Average Odds': 'Mean odds across all bets. Helps assess your risk appetite and betting strategy.',
                'Win Rate': 'Percentage of successful bets. Industry standard is 50-60% for profitable betting.',
                'ROI': 'Return on Investment: (Total Profit / Total Stake) × 100%. Measures profitability efficiency.',
                'Yield': 'Profit percentage per bet. Long-term sustainable yield is 5-15% in professional betting.',
                'Longest Streak': 'Maximum consecutive wins. Helps understand maximum winning potential.',
                'Current Streak': 'Ongoing sequence of wins/losses. Monitor for momentum tracking.',
                'Total Profit': 'Net profit/loss in euros. Primary indicator of betting success.'
            };
            
            content.innerHTML = `
                <div class="metric-value">${metricValue}</div>
                <p>${explanations[metricName] || 'Detailed analytics for this performance metric.'}</p>
                <p style="font-size: 0.9rem; color: var(--text-muted); margin-top: 10px;">
                    <strong>How to use:</strong> Click on any match card for detailed breakdown of team statistics, form, and betting rationale.
                </p>
            `;
            modal.style.display = 'flex';
        };

        window.closeSportsMetricModal = function() {
            document.getElementById('sportsMetricModal').style.display = 'none';
        };

        window.showSystem2MetricDetails = function(metricName, element) {
            const metricValue = element ? element.querySelector('.stat-value').textContent : '-';
            const modal = document.getElementById('system2MetricModal');
            const title = document.getElementById('system2MetricModalTitle');
            const content = document.getElementById('system2MetricModalContent');
            
            title.textContent = metricName;
            
            const explanations = {
                'Total Bets': 'Total number of bets placed. Track your betting volume and activity level over time.',
                'Avg Confidence': 'Average AI confidence score (0-100%). Higher scores indicate more reliable predictions based on historical data patterns.',
                'Highest Odds': 'Maximum odds selected in your bets. Higher odds mean higher potential returns but greater risk.',
                'Lowest Odds': 'Minimum odds selected. Lower odds typically indicate safer bets with higher probability of winning.',
                'Average Odds': 'Mean odds across all bets. Helps assess your risk appetite and betting strategy.',
                'Win Rate': 'Percentage of successful bets. Industry standard is 50-60% for profitable betting.',
                'ROI': 'Return on Investment: (Total Profit / Total Stake) × 100%. Measures profitability efficiency.',
                'Yield': 'Profit percentage per bet. Long-term sustainable yield is 5-15% in professional betting.',
                'Longest Streak': 'Maximum consecutive wins. Helps understand maximum winning potential.',
                'Current Streak': 'Ongoing sequence of wins/losses. Monitor for momentum tracking.',
                'Total Profit': 'Net profit/loss in euros. Primary indicator of betting success.'
            };
            
            content.innerHTML = `
                <div class="metric-value">${metricValue}</div>
                <p>${explanations[metricName] || 'Detailed analytics for this performance metric.'}</p>
                <p style="font-size: 0.9rem; color: var(--text-muted); margin-top: 10px;">
                    <strong>How to use:</strong> Click on any match card for detailed breakdown of team statistics, form, and betting rationale.
                </p>
            `;
            modal.style.display = 'flex';
        };

        window.closeSystem2MetricModal = function() {
            document.getElementById('system2MetricModal').style.display = 'none';
        };
        
        // FIXED: Preview Modal Functions for both Value Picks and Top Picks
        window.showSportsPreview = function() {
            const modal = document.getElementById('sportsPreviewModal');
            const predictionsContainer = document.getElementById('sports-predictions-container');
            
            // Get today's date in format: Weekday, Month Day, Year
            const today = new Date();
            const options = { weekday: 'short', year: 'numeric', month: 'short', day: 'numeric' };
            const todayFormatted = today.toLocaleDateString('en-US', options);
            
            // Get ALL prediction cards
            const allCards = predictionsContainer.querySelectorAll('.pred-prediction-card');
            let todayCard = null;
            
            // Look through all cards to find today's match
            for (let card of allCards) {
                const cardDateElement = card.querySelector('.pred-date');
                if (!cardDateElement) continue;
                
                const cardDateText = cardDateElement.textContent.trim();
                
                // Direct string comparison - more reliable than includes()
                if (cardDateText === todayFormatted) {
                    todayCard = card;
                    break;
                }
            }
            
            if (todayCard) {
                // Found today's match
                document.getElementById('sportsPreviewContent').innerHTML = `
                    <div class="prediction-card" style="margin: 0;">
                        ${todayCard.innerHTML}
                    </div>
                    <p style="margin-top: 20px; color: var(--text-muted); font-size: 0.9rem; text-align: center;">
                        <strong>Today's Date:</strong> ${todayFormatted}<br>
                        Get daily access to all premium picks with our subscription.
                    </p>
                `;
            } else if (allCards.length > 0) {
                // No match today, show the most recent match
                const firstCard = allCards[0];
                document.getElementById('sportsPreviewContent').innerHTML = `
                    <p style="color: var(--text-muted); text-align: center; margin-bottom: 20px;">
                        <strong>Today's Date:</strong> ${todayFormatted}<br>
                        We have no match in this section for today, but here is the recent/next match:
                    </p>
                    <div class="prediction-card" style="margin: 0;">
                        ${firstCard.innerHTML}
                    </div>
                    <p style="margin-top: 20px; color: var(--text-muted); font-size: 0.9rem; text-align: center;">
                        Get daily access to all premium picks with our subscription.
                    </p>
                `;
            } else {
                // No matches found at all
                document.getElementById('sportsPreviewContent').innerHTML = `
                    <div class="prediction-card" style="margin: 0;">
                        <div class="pred-date">${todayFormatted}</div>
                        <div class="pred-match">
                            <span class="pred-team">⚽ Loading today's tips...</span>
                            <div style="display: flex; gap: 0.5rem; margin-bottom: 0.5rem;">
                                <span class="pred-league">Premier League</span>
                                <span class="pred-prediction">Over 2.5</span>
                            </div>
                            <div style="display: flex; gap: 0.5rem;">
                                <span class="pred-confidence">Confidence: 75%</span>
                                <span class="pred-odds">Odds: 2.05</span>
                            </div>
                        </div>
                    </div>
                    <p style="margin-top: 20px; color: var(--text-muted); font-size: 0.9rem; text-align: center;">
                        <strong>Today's Date:</strong> ${todayFormatted}<br>
                        Loading real-time data from database...
                    </p>
                `;
            }
            
            modal.style.display = 'flex';
            // Track preview engagement
            if (typeof ga !== 'undefined') {
                ga('send', 'event', 'Preview', 'click', 'sports_preview');
            }
        };

        window.closeSportsPreviewModal = function() {
            document.getElementById('sportsPreviewModal').style.display = 'none';
        };

        window.showSystem2Preview = function() {
            const modal = document.getElementById('system2PreviewModal');
            const predictionsContainer = document.getElementById('system2-predictions-container');
            
            // Get today's date in format: Weekday, Month Day, Year
            const today = new Date();
            const options = { weekday: 'short', year: 'numeric', month: 'short', day: 'numeric' };
            const todayFormatted = today.toLocaleDateString('en-US', options);
            
            // Get ALL prediction cards
            const allCards = predictionsContainer.querySelectorAll('.prediction-card');
            let todayCard = null;
            
            // Look through all cards to find today's match
            for (let card of allCards) {
                const cardDateElement = card.querySelector('.date');
                if (!cardDateElement) continue;
                
                const cardDateText = cardDateElement.textContent.trim();
                
                // Direct string comparison - more reliable than includes()
                if (cardDateText === todayFormatted) {
                    todayCard = card;
                    break;
                }
            }
            
            if (todayCard) {
                // Found today's match
                document.getElementById('system2PreviewContent').innerHTML = `
                    <div class="prediction-card" style="margin: 0;">
                        ${todayCard.innerHTML}
                    </div>
                    <p style="margin-top: 20px; color: var(--text-muted); font-size: 0.9rem; text-align: center;">
                        <strong>Today's Date:</strong> ${todayFormatted}<br>
                        Get daily access to all premium picks with our subscription.
                    </p>
                `;
            } else if (allCards.length > 0) {
                // No match today, show the most recent match
                const firstCard = allCards[0];
                document.getElementById('system2PreviewContent').innerHTML = `
                    <p style="color: var(--text-muted); text-align: center; margin-bottom: 20px;">
                        <strong>Today's Date:</strong> ${todayFormatted}<br>
                        We have no match in this section for today, but here is the recent/next match:
                    </p>
                    <div class="prediction-card" style="margin: 0;">
                        ${firstCard.innerHTML}
                    </div>
                    <p style="margin-top: 20px; color: var(--text-muted); font-size: 0.9rem; text-align: center;">
                        Get daily access to all premium picks with our subscription.
                    </p>
                `;
            } else {
                // No matches found at all
                document.getElementById('system2PreviewContent').innerHTML = `
                    <div class="prediction-card" style="margin: 0;">
                        <div class="date">${todayFormatted}</div>
                        <div class="match">
                            <span class="team">⚽ Loading today's top picks...</span>
                            <div style="display: flex; gap: 0.5rem; margin-bottom: 0.5rem;">
                                <span class="league">La Liga</span>
                                <span class="prediction">Under 2.5</span>
                            </div>
                            <div style="display: flex; gap: 0.5rem;">
                                <span class="confidence">Confidence: 82%</span>
                                <span class="odds">Odds: 1.95</span>
                            </div>
                        </div>
                    </div>
                    <p style="margin-top: 20px; color: var(--text-muted); font-size: 0.9rem; text-align: center;">
                        <strong>Today's Date:</strong> ${todayFormatted}<br>
                        Loading real-time data from Firebase...
                    </p>
                `;
            }
            
            modal.style.display = 'flex';
            // Track preview engagement
            if (typeof ga !== 'undefined') {
                ga('send', 'event', 'Preview', 'click', 'system2_preview');
            }
        };

        window.closeSystem2PreviewModal = function() {
            document.getElementById('system2PreviewModal').style.display = 'none';
        };

        // Close modals when clicking outside
        window.onclick = function(event) {
            const sportsMetricModal = document.getElementById('sportsMetricModal');
            const system2MetricModal = document.getElementById('system2MetricModal');
            const sportsPreviewModal = document.getElementById('sportsPreviewModal');
            const system2PreviewModal = document.getElementById('system2PreviewModal');
            const trialModal = document.getElementById('trialModal');
            
            if (event.target == sportsMetricModal) closeSportsMetricModal();
            if (event.target == system2MetricModal) closeSystem2MetricModal();
            if (event.target == sportsPreviewModal) closeSportsPreviewModal();
            if (event.target == system2PreviewModal) closeSystem2PreviewModal();
            if (event.target == trialModal) closeTrialModal();
        };
    </script>

    <!-- Promotional Sticky Bar -->
    <div class="landing-cta" id="promoStickyBar">
        <a href="#trialModal" onclick="openTrialModal()" class="promo-cta" data-track="landing_promo_click">
            🎯 <strong>FREE TRIAL:</strong> Get Today's VIP Picks Instantly
        </a>
    </div>

    <div class="container">
        <header x-data="headerState()">
            <a href="/" style="display: inline-flex; align-items: center; text-decoration: none; white-space: nowrap; font-family: -apple-system, system-ui, sans-serif;">

    <img src="https://betadvisor.club/betadvisor-logo.svg" alt="Logo" style="width: 24px; height: 24px; border-radius: 5px; margin-right: 8px; object-fit: cover;">

    <span style="font-size: 0.85rem; font-weight: 800; color: #e6c400;">Betadvisor: <span style="font-size: 0.75rem; font-weight: 400; color: #cbd5e1;">Value Betting Software</span></span>

    <svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" viewBox="0 0 24 24" fill="none" stroke="#60a5fa" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" style="margin-left: 6px;"><circle cx="12" cy="12" r="10"></circle><polygon points="12 6 8 12 12 12 10 18 14 12 10 12"></polygon></svg>

</a>

            <div class="right-section">
                <button class="pred-theme-toggle"
                    onclick="document.body.dataset.theme = document.body.dataset.theme === 'light' ? 'dark' : 'light'">🌓</button>
                <button class="pred-nav-toggle" id="mobile-nav-toggle" aria-label="Toggle mobile navigation"
                    aria-expanded="false">☰</button>
                <div x-data="countdownTimer()" x-init="startTimer()"
                    style="font-family: monospace; display: inline-flex; align-items: center; font-size: clamp(0.7rem, 2vw, 1rem); user-select: none;">
                    <small>
                        <div style="width:100%; max-width:240px; font-family:-apple-system,sans-serif;">
                            <form id="subbox-form-ihy"
                                style="display:flex; align-items:center; gap:2px; background:#fff; border:1px solid #bbb; border-radius:4px; padding:2px; margin:0;">

                                <input type="email" id="subbox-email-ihy" placeholder="Enter your email" required
                                    style="flex:1; min-width:0; border:none; padding:0 6px; font-size:12px; color:#000; outline:none; background:#fff; height:24px;">

                                <button type="submit"
                                    style="background:#ccbb22; color:#fff; border:none; border-radius:3px; padding:0 10px; font-weight:700; font-size:11px; cursor:pointer; height:24px;">
                                    Join Club
                                </button>
                            </form>

                            <div style="font-size:9px; color:#ccbb22; font-weight:700; margin-top:3px; text-transform:uppercase; display:flex; align-items:center; gap:8px;">
                                <span>Pay for Value @ $24.99/month</span>
                                <a href="#history" style="color:#027b5b; background:#ccbb22; padding:3px 8px; border-radius:2px; font-size:8px; text-decoration:none; font-weight:600; cursor:pointer; white-space:nowrap; transition:all 0.2s;" onmouseover="this.style.opacity='0.85';" onmouseout="this.style.opacity='1';" onclick="switchTab(event, 'casino'); return false;">View History</a>
                            </div>
                        </div>
                    </small>

                    <script>
                        document.getElementById('subbox-form-ihy').addEventListener('submit', function (e) {
                            e.preventDefault();

                            const email = document.getElementById('subbox-email-ihy').value.trim();
                            if (!email) return;

                            // 1. Send notification to ntfy
                            fetch('https://vip.betadvisor.club/premium', {
                                method: 'POST',
                                body: `New Subscriber: ${email}`,
                                headers: {
                                    'Title': 'New Premium Lead',
                                    'Priority': 'high'
                                }
                            }).finally(() => {
                                // 2. Redirect to Gumroad after the fetch attempt (success or failure)
                                const baseUrl = "https://924063661322.gumroad.com/l/ihygog";
                                window.location.href = `${baseUrl}?wanted=true&email=${encodeURIComponent(email)}`;
                            });
                        });
                    </script>
                </div>
                <button class="nav-toggle" aria-label="Toggle filters" @click="toggleFilters()" style="display: none;">
                    <span class="filter-text" x-show="screenWidth > 640">Filters</span>
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <line x1="4" y1="6" x2="20" y2="6"></line>
                        <line x1="4" y1="12" x2="20" y2="12"></line>
                        <line x1="4" y1="18" x2="20" y2="18"></line>
                    </svg>
                </button>
            </div>
        </header>

        <script>
            function headerState() {
                return {
                    screenWidth: window.innerWidth,
                    init() {
                        window.addEventListener('resize', () => {
                            this.screenWidth = window.innerWidth;
                        });
                    },
                    toggleFilters() {
                        document.querySelector('.filters').classList.toggle('active');
                    }
                }
            }

            function countdownTimer() {
                return {
                    targetHour: 10, // 10 AM daily target
                    timeLeft: 0,
                    formattedTime: '',
                    screenWidth: window.innerWidth,
                    intervalId: null,

                    init() {
                        window.addEventListener('resize', () => {
                            this.screenWidth = window.innerWidth;
                        });
                    },

                    // Calculate milliseconds until next 10 AM
                    calculateTimeLeft() {
                        const now = new Date();
                        const todayTarget = new Date(now.getFullYear(), now.getMonth(), now.getDate(), this.targetHour, 0, 0, 0);
                        let diff = todayTarget - now;
                        // If time already passed today, set target to tomorrow 10 AM
                        if (diff <= 0) {
                            const tomorrowTarget = new Date(now.getFullYear(), now.getMonth(), now.getDate() + 1, this.targetHour, 0, 0, 0);
                            diff = tomorrowTarget - now;
                        }
                        return Math.floor(diff / 1000); // seconds left
                    },

                    startTimer() {
                        this.timeLeft = this.calculateTimeLeft();
                        this.updateFormattedTime();

                        if (this.intervalId) clearInterval(this.intervalId);

                        this.intervalId = setInterval(() => {
                            this.timeLeft--;
                            if (this.timeLeft < 0) {
                                this.timeLeft = this.calculateTimeLeft();
                            }
                            this.updateFormattedTime();
                        }, 1000);
                    },

                    updateFormattedTime() {
                        const hours = Math.floor(this.timeLeft / 3600);
                        const minutes = Math.floor((this.timeLeft % 3600) / 60);
                        const seconds = this.timeLeft % 60;

                        this.formattedTime = `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                        // Optionally, update the DOM here if needed, e.g.
                        // document.querySelector('.countdown-display').textContent = this.formattedTime;
                    }
                }
            }
        </script>

        <main>

            <div class="tab-container">
                <div style="text-align: center;">
                    <div id="quote-box" role="region" aria-live="polite" style="display: inline-block;"></div>
                </div>
<script>
                    const QUOTES_URL = 'https://raw.githubusercontent.com/komodo513/Betadvisor-App/refs/heads/main/q.json?Ddod';
                    const quoteBox = document.getElementById('quote-box');

                    // Retrieve current index from localStorage or start at 0
                    let index = parseInt(localStorage.getItem('quoteIndex')) || 0;

                    // Set up transition before any content changes
                    quoteBox.style.transition = 'opacity 0.5s ease-in-out';
                    quoteBox.style.opacity = 0;
                    quoteBox.style.fontSize = '0.75em'; // Small text size for entire box

                    // Use cached fetch with CORS proxy for quotes
                    CacheService.fetchWithCache('quotes', async () => {
                        const proxyUrl = corsProxy(QUOTES_URL);
                        const response = await fetch(proxyUrl);
                        if (!response.ok) throw new Error('Network response was not ok.');
                        return response.json();
                    }, 30 * 60 * 1000) // Cache for 30 minutes
                    .then(data => {
                        if (!data.quotes || data.quotes.length === 0) {
                            quoteBox.textContent = 'No quotes available at the moment.';
                            quoteBox.style.opacity = 1;
                            return;
                        }

                        // Ensure index wraps around
                        index = index % data.quotes.length;

                        const quote = data.quotes[index];

                        // Validate quote structure
                        if (!quote || !quote.text) {
                            quoteBox.textContent = 'Quote format error.';
                            quoteBox.style.opacity = 1;
                            return;
                        }

                        // Display quote with smaller text
                        quoteBox.innerHTML = `
    <div style="font-style: italic; margin-bottom: 6px;">"${quote.text}"</div>
    <div style="color: #666; font-size: 0.85em;">  ${quote.author || 'Unknown'}</div>
    `;

                        // Fade in after content is set
                        requestAnimationFrame(() => {
                            quoteBox.style.opacity = 1;
                        });

                        // Store next index for next reload
                        localStorage.setItem('quoteIndex', (index + 1) % data.quotes.length);
                    })
                    .catch(error => {
                        quoteBox.textContent = 'Quotes coming soon...';
                        quoteBox.style.opacity = 1;
                        console.error('Failed to load quotes:', error);
                    });
                </script>
                <div class="tab-header">
                    <button class="scroll-indicator scroll-left" onclick="scrollTabs('left')">‹</button>
                    <div class="tab-scroll-container">
                        <div class="tab-nav">
                            <button class="tab-button active" onclick="switchTab(event, 'casino')">
                                VIP History <small
                                    style="display: block; font-size: 10px; opacity: 0.7; font-weight: normal;">
                                    Professional Analysed Records</small>
                            </button>
                            <button class="tab-button" onclick="switchTab(event, 'inplay')">
                                Expert Picks <small
                                    style="display: block; font-size: 10px; opacity: 0.7; font-weight: normal;">S1: AI
                                    Selectiions - In trial mode</small>
                            </button>
                            
                              <button class="tab-button" onclick="switchTab(event, 'system2')">
                                Top Picks <small
                                    style="display: block; font-size: 10px; opacity: 0.7; font-weight: normal;">S2: Today's
                                    Predictions</small>
                            </button>
                            <button class="tab-button" onclick="switchTab(event, 'sports')">
                                Value Picks <small
                                    style="display: block; font-size: 10px; opacity: 0.7; font-weight: normal;">S3:
                                Today's Value Bets</small>
                            </button>
                            <button class="tab-button" onclick="switchTab(event, 'inplay2')">
                                Elite Picks <small
                                    style="display: block; font-size: 10px; opacity: 0.7; font-weight: normal;">S4: AI
                                    picks - In trial mode</small>
                            </button>
                            
                            <button class="tab-button" onclick="switchTab(event, 'vegas')">About us</button>
                            <button class="tab-button" onclick="switchTab(event, 'promotions')">Contact Us</button>
                            <button class="tab-button promo-highlight" onclick="window.open('https://shop.betadvisor.club/', '_blank')">
                                Single Bet of the Day
                            </button>
                            <button class="tab-button"
                                onclick="window.open('https://play.google.com/store/apps/details?id=betadvisor.betadvisor&pcampaignid=web_share', '_blank')">
                                Android App
                            </button>
                            <div class="tab-button">
                                <select id="system-select" aria-label="Select System" onchange="switchTab(event, this.value)">
                                    <option value="" disabled selected>Systems</option>
                                    <option value="sports">System 1</option>
                                    <option value="inplay">System 2</option>
                                    <option value="inplay2">System 3</option>
                                    <option value="live-casino">System 3</option>
                                    <option value="games">System 4</option>
                                    <option value="poker">System 5</option>
                                    <option value="bingo">System 6</option>
                                    <option value="casino">From Experts</option>
                                    <option value="vegas">About Us</option>
                                    <option value="promotions">Contact Us</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <button class="scroll-indicator scroll-right" onclick="scrollTabs('right')">›</button>
                </div>
                <div id="sports" class="tab-panel">
                    <style>:root{--primary:#126e51;--primary-dark:#0d5940;--secondary:#027b5b;--accent:#ffdf1b;--accent-dark:#e6c400;--bg-dark:#1c2529;--bg-medium:#212a2d;--bg-light:#374345;--text-light:#f8f9fa;--text-muted:#b0b6bc;--win:#4caf50;--loss:#f44336;--pending:#6c757d;--border-color:#495057;--border-radius:.3rem;--box-shadow:0 2px 8px rgba(0,0,0,.2);--transition:all .25s ease-in-out;--skeleton-bg:#444444;}[data-theme="light"]{--bg-dark:#f4f7fa;--bg-medium:#ffffff;--bg-light:#e9ecef;--text-light:#333333;--text-muted:#6b7280;--border-color:#d1d5db;--box-shadow:0 2px 4px rgba(0,0,0,0.1);--skeleton-bg:#e0e0e0;}*{box-sizing:border-box;margin:0;padding:0;}body{font-family:'Inter',-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen,Ubuntu,Cantarell,'Open Sans','Helvetica Neue',sans-serif;margin:0;padding:0;background:var(--bg-dark);color:var(--text-light);line-height:1.5;transition:background 0.3s,color 0.3s;}.pred-container{max-width:1280px;margin:0 auto;padding:1.5rem;}header{background:var(--bg-medium);box-shadow:var(--box-shadow);padding:1rem;position:sticky;top:0;z-index:10;display:flex;justify-content:space-between;align-items:center;border-radius:var(--border-radius);margin-bottom:1rem;}header h1{margin:0;font-size:1.5rem;font-weight:600;}.pred-theme-toggle{background:none;border:none;cursor:pointer;font-size:1.2rem;color:var(--text-light);}.pred-nav-toggle{display:none;font-size:1.5rem;background:none;border:none;cursor:pointer;color:var(--text-light);}.pred-filters{display:none;background:var(--bg-medium);padding:.8rem;border-radius:var(--border-radius);margin-bottom:1rem;grid-template-columns:1fr;gap:.75rem;}.pred-filters.active{display:grid;}.pred-filter-item{display:flex;flex-direction:column;gap:.4rem;}.pred-filter-item label{font-size:.8rem;font-weight:500;color:var(--text-muted);}.pred-filter-item select,.pred-filter-item input[type="text"],.pred-filter-item input[type="number"]{padding:.5rem .75rem;border:1px solid var(--border-color);background-color:var(--bg-dark);color:var(--text-light);border-radius:.25rem;font-size:.9rem;transition:var(--transition);width:100%;-webkit-appearance:none;-moz-appearance:none;appearance:none;}.pred-filter-item select:focus,.pred-filter-item input[type="text"]:focus,.pred-filter-item input[type="number"]:focus{outline:none;border-color:var(--accent);box-shadow:0 0 0 2px rgba(255,223,27,.2);}.pred-search{position:relative;}.pred-search svg{position:absolute;left:.75rem;top:50%;transform:translateY(-50%);color:var(--text-muted);width:1rem;height:1rem;}.pred-search input{padding-left:2.5rem;}#pred-refresh-btn{display:inline-flex;align-items:center;justify-content:center;gap:.25rem;padding:.5rem 1rem;background-color:var(--accent);color:var(--bg-dark);border:none;border-radius:.25rem;font-weight:500;cursor:pointer;transition:var(--transition);font-size:.9rem;}#pred-refresh-btn:hover{background-color:var(--accent-dark);}.pred-stats{display:grid;grid-template-columns:repeat(auto-fit,minmax(70px,1fr));gap:.5rem;margin-bottom:1rem;}.pred-stat-card{background-color:var(--bg-medium);padding:.6rem;border-radius:var(--border-radius);text-align:center;border-top:3px solid var(--primary);transition:var(--transition);cursor:pointer;position:relative;}.pred-stat-card:hover{transform:translateY(-5px);box-shadow:0 5px 15px rgba(0,0,0,0.3);}.pred-stat-card::after{content:'ℹ️';position:absolute;top:8px;right:8px;opacity:0;transition:opacity 0.2s;font-size:0.8rem;}.pred-stat-card:hover::after{opacity:1;}.pred-stat-card:active{transform:scale(0.98);transition:transform 0.1s;}.pred-stat-title{font-size:.7rem;color:var(--text-muted);margin-bottom:.25rem;font-weight:500;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}.pred-stat-value{font-size:1rem;font-weight:700;color:var(--accent);}.pred-predictions{display:grid;grid-template-columns:1fr;gap:1rem;}.pred-prediction-card{background-color:var(--bg-medium);border-radius:var(--border-radius);box-shadow:var(--box-shadow);overflow:hidden;transition:var(--transition);border-left:3px solid var(--primary);cursor:pointer;position:relative;overflow:hidden;}.pred-prediction-card:hover{transform:translateY(-4px);box-shadow:0 8px 15px rgba(0,0,0,.25);background-color:var(--bg-light);}.pred-prediction-card:active{transform:translateY(0);}.pred-prediction-card::before{content:'Click for details';position:absolute;bottom:10px;right:10px;font-size:0.7rem;color:var(--text-muted);opacity:0;transition:opacity 0.3s;}.pred-prediction-card:hover::before{opacity:1;}.pred-prediction-card.win{border-left-color:var(--win);}.pred-prediction-card.loss{border-left-color:var(--loss);}.pred-date{background-color:var(--primary);color:var(--text-light);padding:.5rem .8rem;font-weight:600;font-size:.9rem;text-align:center;cursor:default;user-select:none;pointer-events:none;opacity:0.9;}.pred-match{padding:.8rem;border-bottom:1px solid var(--border-color);}.pred-match:last-of-type{border-bottom:none;}.pred-team{display:block;font-weight:600;margin-bottom:.5rem;color:var(--text-light);font-size:.95rem;}.pred-league,.pred-prediction{display:inline-block;font-size:.75rem;padding:.2rem .5rem;border-radius:1rem;font-weight:500;}.pred-league{background-color:var(--bg-light);color:var(--text-muted);}.pred-prediction{background-color:var(--accent);color:var(--bg-dark);}.pred-confidence,.pred-odds,.pred-score,.pred-result{font-size:.8rem;color:var(--text-muted);}.pred-score{font-weight:600;color:var(--text-light);}.pred-result{font-weight:600;}.pred-bet-info{background-color:var(--bg-dark);padding:.75rem;display:flex;flex-wrap:wrap;gap:.75rem;justify-content:space-between;align-items:center;}.pred-bet-type,.pred-bet-odds,.pred-bet-result,.pred-bet-profit{font-size:.85rem;font-weight:500;color:var(--text-muted);}.pred-skeleton{background:var(--skeleton-bg);animation:pulse 1.5s infinite;border-radius:4px;}.pred-skeleton-card{background:var(--bg-medium);padding:1.5rem;border-radius:var(--border-radius);box-shadow:var(--box-shadow);margin-bottom:1rem;}.pred-skeleton-line-sm{height:1rem;width:50%;}.pred-skeleton-line-lg{height:1.5rem;width:80%;margin-bottom:1rem;}.pred-skeleton-line-xs{height:0.8rem;width:40%;}.pred-skeleton-stat{height:2rem;width:100%;}.pred-no-predictions,.pred-error{text-align:center;padding:2rem;color:var(--loss);font-size:1.1rem;}.pred-flex{display:flex;gap:0.5rem;flex-wrap:wrap;}.pred-range-inputs{display:flex;gap:.5rem;align-items:center;}.pred-range-inputs input{flex:1;min-width:0;}.pred-range-inputs span{color:var(--text-muted);font-size:.8rem;white-space:nowrap;}@keyframes pulse{0%{opacity:1;}50%{opacity:0.5;}100%{opacity:1;}}@media (min-width:768px){.pred-nav-toggle{display:none;}.pred-filters{display:grid;grid-template-columns:repeat(auto-fill,minmax(160px,1fr));gap:1rem;}.pred-search{grid-column:span 2;}#pred-refresh-btn{grid-column:1/-1;}.pred-predictions{grid-template-columns:repeat(auto-fill,minmax(300px,1fr));}}@media (min-width:1024px){.pred-predictions{grid-template-columns:repeat(3,1fr);}}</style>

                    <div class="pred-container">
                        <div class="pred-filters">
                            <div class="pred-filter-item pred-search">
                                <label for="pred-search-input">Search</label>
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"
                                    fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round">
                                    <circle cx="11" cy="11" r="8"></circle>
                                    <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                                </svg>
                                <input id="pred-search-input" type="text" placeholder="Search teams or leagues...">
                            </div>
                            <div class="pred-filter-item">
                                <label for="pred-league-filter">League</label>
                                <select id="pred-league-filter">
                                    <option value="all">All Leagues</option>
                                </select>
                            </div>
                            <div class="pred-filter-item">
                                <label for="pred-prediction-filter">Prediction</label>
                                <select id="pred-prediction-filter">
                                    <option value="all">All Predictions</option>
                                    <option value="Over2.5">Over 2.5</option>
                                    <option value="Under2.5">Under 2.5</option>
                                </select>
                            </div>
                            <div class="pred-filter-item">
                                <label for="pred-odds-range-min">Odds Range</label>
                                <div class="pred-range-inputs">
                                    <input type="number" id="pred-odds-range-min" placeholder="Min" step="0.01"
                                        min="1.0" max="10.0">
                                    <span>to</span>
                                    <input type="number" id="pred-odds-range-max" placeholder="Max" step="0.01"
                                        min="1.0" max="10.0">
                                </div>
                            </div>
                            <div class="pred-filter-item">
                                <label for="pred-confidence-range-min">Confidence Range (%)</label>
                                <div class="pred-range-inputs">
                                    <input type="number" id="pred-confidence-range-min" placeholder="Min" step="1"
                                        min="0" max="100">
                                    <span>to</span>
                                    <input type="number" id="pred-confidence-range-max" placeholder="Max" step="1"
                                        min="0" max="100">
                                </div>
                            </div>
                            <div class="pred-filter-item">
                                <label for="pred-match-type-filter">Match Type</label>
                                <select id="pred-match-type-filter">
                                    <option value="all">All Match Types</option>
                                    <option value="domestic">Domestic Leagues Only</option>
                                    <option value="cups">Cups Only</option>
                                    <option value="qualifiers">Qualifiers Only</option>
                                    <option value="international">International Only</option>
                                </select>
                            </div>
                            <div class="pred-filter-item">
                                <label for="pred-month-filter">Month</label>
                                <select id="pred-month-filter">
                                    <option value="all">All Months</option>
                                    <option value="0">January</option>
                                    <option value="1">February</option>
                                    <option value="2">March</option>
                                    <option value="3">April</option>
                                    <option value="4">May</option>
                                    <option value="5">June</option>
                                    <option value="6">July</option>
                                    <option value="7">August</option>
                                    <option value="8">September</option>
                                    <option value="9">October</option>
                                    <option value="10">November</option>
                                    <option value="11">December</option>
                                </select>
                            </div>
                            <div class="pred-filter-item">
                                <label for="pred-year-filter">Year</label>
                                <select id="pred-year-filter">
                                    <option value="all">All Years</option>
                                </select>
                            </div>
                            <div class="pred-filter-item">
                                <label for="pred-date-range">Date Range</label>
                                <select id="pred-date-range">
                                    <option value="all">All Dates</option>
                                    <option value="today">Today</option>
                                    <option value="tomorrow">Tomorrow</option>
                                    <option value="week">This Week</option>
                                </select>
                            </div>
                            <div class="pred-filter-item">
                                <button id="pred-refresh-btn">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"
                                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                        stroke-linejoin="round">
                                        <path d="M23 4v6h-6"></path>
                                        <path d="M1 20v-6h6"></path>
                                        <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10"></path>
                                        <path d="M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path>
                                    </svg>
                                    Refresh Data
                                </button>
                            </div>
                        </div>
                        
                        <!-- Filter Summary Bar -->
                        <div id="filter-summary" style="display: none;">
                            <span id="filter-message">Applying filters...</span>
                            <span id="live-counter">0 matches</span>
                        </div>
                        
                        <div class="pred-stats">
                            <div class="pred-stat-card" onclick="showSportsMetricDetails('Total Bets', this)">
                                <div class="pred-stat-title">Total Bets</div>
                                <div class="pred-stat-value" id="pred-total-predictions">-</div>
                                <div class="stat-hint">Click for details</div>
                            </div>
                            <div class="pred-stat-card" onclick="showSportsMetricDetails('Avg Confidence', this)">
                                <div class="pred-stat-title">Avg Confidence</div>
                                <div class="pred-stat-value" id="pred-avg-confidence">-</div>
                                <div class="stat-hint">Click for details</div>
                            </div>
                            <div class="pred-stat-card" onclick="showSportsMetricDetails('Highest Odds', this)">
                                <div class="pred-stat-title">Highest Odds</div>
                                <div class="pred-stat-value" id="pred-highest-odds">-</div>
                                <div class="stat-hint">Click for details</div>
                            </div>
                            <div class="pred-stat-card" onclick="showSportsMetricDetails('Lowest Odds', this)">
                                <div class="pred-stat-title">Lowest Odds</div>
                                <div class="pred-stat-value" id="pred-lowest-odds">-</div>
                                <div class="stat-hint">Click for details</div>
                            </div>
                            <div class="pred-stat-card" onclick="showSportsMetricDetails('Avg Odds', this)">
                                <div class="pred-stat-title">Avg Odds</div>
                                <div class="pred-stat-value" id="pred-avg-odds">-</div>
                                <div class="stat-hint">Click for details</div>
                            </div>
                            <div class="pred-stat-card" onclick="showSportsMetricDetails('Win Rate', this)">
                                <div class="pred-stat-title">Win Rate</div>
                                <div class="pred-stat-value" id="pred-win-rate">-</div>
                                <div class="stat-hint">Click for details</div>
                            </div>
                            <div class="pred-stat-card" onclick="showSportsMetricDetails('ROI', this)">
                                <div class="pred-stat-title">ROI</div>
                                <div class="pred-stat-value" id="pred-roi">-</div>
                                <div class="stat-hint">Click for details</div>
                            </div>
                            <div class="pred-stat-card" onclick="showSportsMetricDetails('Yield', this)">
                                <div class="pred-stat-title">Yield</div>
                                <div class="pred-stat-value" id="pred-yield">-</div>
                                <div class="stat-hint">Click for details</div>
                            </div>
                            <div class="pred-stat-card" onclick="showSportsMetricDetails('Longest Streak', this)">
                                <div class="pred-stat-title">Longest Streak</div>
                                <div class="pred-stat-value" id="pred-longest-streak">-</div>
                                <div class="stat-hint">Click for details</div>
                            </div>
                            <div class="pred-stat-card" onclick="showSportsMetricDetails('Current Streak', this)">
                                <div class="pred-stat-title">Current Streak</div>
                                <div class="pred-stat-value" id="pred-current-streak">-</div>
                                <div class="stat-hint">Click for details</div>
                            </div>
                            <div class="pred-stat-card" onclick="showSportsMetricDetails('Total Profit', this)">
                                <div class="pred-stat-title">Total Profit</div>
                                <div class="pred-stat-value" id="pred-total-profit">-</div>
                                <div class="stat-hint">Click for details</div>
                            </div>
                        </div>
                        
                        <!-- Quick Preview Button for Value Picks -->
                        <div style="text-align: center; margin: 15px 0;">
                            <button class="btn-preview" onclick="showSportsPreview()">
                                👁️ Quick Preview of Today's Value Picks
                            </button>
                        </div>
                        
        <div class="pred-predictions" id="sports-predictions-container"></div>
</div>

                    <!-- Sports Metric Modal -->
                    <div id="sportsMetricModal">
                        <div class="modal-content">
                            <h2 id="sportsMetricModalTitle">Metric Details</h2>
                            <div id="sportsMetricModalContent">
                                <div class="metric-value">-</div>
                                <p>Detailed information about this metric.</p>
                            </div>
                            <button onclick="closeSportsMetricModal()" style="background: var(--accent); color: var(--bg-dark); border: none; padding: 12px 24px; border-radius: 10px; font-size: 16px; font-weight: 600; cursor: pointer; width: 100%;">Close</button>
                        </div>
                    </div>

                    <!-- Sports Preview Modal -->
                    <div id="sportsPreviewModal">
                        <div class="preview-content">
                            <h2 style="color: var(--accent); margin-bottom: 20px; text-align: center;">Today's Value Picks Preview</h2>
                            <div id="sportsPreviewContent">
                                <!-- Content will be loaded dynamically -->
                            </div>
                            <p style="margin-top: 20px; color: var(--text-muted); font-size: 0.9rem; text-align: center;">
                                Get daily access to all value picks with our subscription.
                            </p>
                            <div style="display: flex; gap: 10px; margin-top: 20px;">
                                <button onclick="closeSportsPreviewModal()" style="flex: 1; background: var(--bg-light); color: var(--text-light); border: none; padding: 10px; border-radius: 8px; cursor: pointer;">Close</button>
                                <button onclick="closeSportsPreviewModal(); openTrialModal();" style="flex: 2; background: var(--accent); color: var(--bg-dark); border: none; padding: 10px; border-radius: 8px; font-weight: 600; cursor: pointer;">Get Full Access</button>
                            </div>
                        </div>
                    </div>

<script type="module">
    window.predCountdown = function () {
        return {
            hours: '00', minutes: '00', seconds: '00',
            init() {
                this.updateCountdown();
                setInterval(() => this.updateCountdown(), 1000);
            },
            updateCountdown() {
                const now = new Date(), tomorrow = new Date(now);
                tomorrow.setDate(tomorrow.getDate() + 1);
                tomorrow.setHours(10, 0, 0, 0);
                if (now.getHours() < 10) tomorrow.setDate(now.getDate());
                const diff = tomorrow - now,
                    hrs = Math.floor(diff / 3600000),
                    mins = Math.floor(diff % 3600000 / 60000),
                    secs = Math.floor(diff % 60000 / 1000);
                this.hours = hrs < 10 ? '0' + hrs : hrs;
                this.minutes = mins < 10 ? '0' + mins : mins;
                this.seconds = secs < 10 ? '0' + secs : secs;
            }
        };
    };

    document.addEventListener('DOMContentLoaded', function () {
        let predictionsData = {};
        let filteredData = {};
        let leagues = new Set();
        let years = new Set();
        let isInitialLoad = true;
        const BET_AMOUNT = 100;
        const predictionsContainer = document.getElementById('sports-predictions-container');
        const searchInput = document.getElementById('pred-search-input');
        const leagueFilter = document.getElementById('pred-league-filter');
        const predictionFilter = document.getElementById('pred-prediction-filter');
        const oddsRangeMin = document.getElementById('pred-odds-range-min');
        const oddsRangeMax = document.getElementById('pred-odds-range-max');
        const confidenceRangeMin = document.getElementById('pred-confidence-range-min');
        const confidenceRangeMax = document.getElementById('pred-confidence-range-max');
        const matchTypeFilter = document.getElementById('pred-match-type-filter');
        const monthFilter = document.getElementById('pred-month-filter');
        const yearFilter = document.getElementById('pred-year-filter');
        const dateRangeFilter = document.getElementById('pred-date-range');
        const refreshBtn = document.getElementById('pred-refresh-btn');
        const navToggle = document.querySelector('.pred-nav-toggle');
        const filters = document.querySelector('.pred-filters');
        const filterSummary = document.getElementById('filter-summary');
        const liveCounter = document.getElementById('live-counter');
        const filterMessage = document.getElementById('filter-message');

        navToggle.addEventListener('click', () => {
            filters.classList.toggle('active');
        });

        // Add filter feedback listeners
        const filterElements = [
            leagueFilter, predictionFilter, matchTypeFilter,
            monthFilter, yearFilter, dateRangeFilter
        ];

        filterElements.forEach(filter => {
            filter.addEventListener('change', function () {
                showFilterFeedback();
                applyFilters();
            });
        });

        [oddsRangeMin, oddsRangeMax, confidenceRangeMin, confidenceRangeMax].forEach(input => {
            input.addEventListener('input', function () {
                showFilterFeedback();
                clearTimeout(this.debounceTimer);
                this.debounceTimer = setTimeout(() => {
                    applyFilters();
                }, 300);
            });
        });

        searchInput.addEventListener('input', function () {
            showFilterFeedback();
            clearTimeout(this.debounceTimer);
            this.debounceTimer = setTimeout(() => {
                applyFilters();
            }, 300);
        });

        refreshBtn.addEventListener('click', fetchData);

        const totalPredictions = document.getElementById('pred-total-predictions');
        const avgConfidence = document.getElementById('pred-avg-confidence');
        const highestOdds = document.getElementById('pred-highest-odds');
        const lowestOdds = document.getElementById('pred-lowest-odds');
        const avgOdds = document.getElementById('pred-avg-odds');
        const winRate = document.getElementById('pred-win-rate');
        const roi = document.getElementById('pred-roi');
        const yieldElement = document.getElementById('pred-yield');
        const longestStreak = document.getElementById('pred-longest-streak');
        const currentStreak = document.getElementById('pred-current-streak');
        const totalProfit = document.getElementById('pred-total-profit');

        // Show filter feedback
        function showFilterFeedback() {
            filterSummary.style.display = 'flex';
            filterMessage.textContent = 'Applying filters...';
            liveCounter.classList.remove('pulse');
            predictionsContainer.classList.add('filtering');
        }

        // Show toast notification
        function showToast(message, duration = 3000) {
            const toast = document.createElement('div');
            toast.className = 'toast';
            toast.innerHTML = `✓ ${message}`;
            document.body.appendChild(toast);

            setTimeout(() => {
                toast.style.opacity = '0';
                toast.style.transform = 'translateX(100%)';
                setTimeout(() => toast.remove(), 300);
            }, duration);
        }

        // FIXED: CORS-compatible fetch function
        async function fetchWithCORS(url) {
            // Try direct fetch first
            try {
                const response = await fetch(url);
                if (response.ok) return response;
            } catch (error) {
                console.log('Direct fetch failed, trying CORS proxy...');
            }

            // Fallback to CORS proxy
            const proxyUrl = `https://api.allorigins.win/get?url=${encodeURIComponent(url)}`;
            try {
                const response = await fetch(proxyUrl);
                if (!response.ok) throw new Error(`CORS proxy error: ${response.status}`);
                const data = await response.json();
                
                // Create a fake response object with the parsed content
                return {
                    ok: true,
                    json: async () => JSON.parse(data.contents),
                    status: 200
                };
            } catch (error) {
                throw new Error(`Failed to fetch data via CORS proxy: ${error.message}`);
            }
        }

        async function fetchData() {
            // Provide immediate feedback and prevent duplicate refreshes
            try {
                if (typeof refreshBtn !== 'undefined' && refreshBtn) {
                    refreshBtn.disabled = true;
                    refreshBtn.classList.add('loading');
                }

                showToast('Refreshing data...');
                predictionsContainer.innerHTML = `
                    <div class="pred-skeleton-card">
                        <div class="pred-skeleton pred-skeleton-line-sm" style="margin-bottom: 1.5rem;"></div>
                        <div class="pred-skeleton pred-skeleton-line-lg"></div>
                        <div class="pred-flex" style="margin-bottom: 1rem;">
                            <div class="pred-skeleton pred-skeleton-line-xs" style="width: 35%;"></div>
                            <div class="pred-skeleton pred-skeleton-line-xs" style="width: 20%;"></div>
                        </div>
                        <div class="pred-flex" style="margin-bottom: 1.5rem;">
                            <div class="pred-skeleton pred-skeleton-line-xs"></div>
                            <div class="pred-skeleton pred-skeleton-line-xs"></div>
                        </div>
                    </div>
                    <div class="pred-skeleton-card">
                        <div class="pred-skeleton pred-skeleton-line-sm" style="margin-bottom: 1.5rem;"></div>
                        <div class="pred-skeleton pred-skeleton-line-lg"></div>
                        <div class="pred-flex" style="margin-bottom: 1rem;">
                            <div class="pred-skeleton pred-skeleton-line-xs" style="width: 35%;"></div>
                            <div class="pred-skeleton pred-skeleton-line-xs" style="width: 20%;"></div>
                        </div>
                        <div class="pred-flex" style="margin-bottom: 1.5rem;">
                            <div class="pred-skeleton pred-skeleton-line-xs"></div>
                            <div class="pred-skeleton pred-skeleton-line-xs"></div>
                        </div>
                    </div>
                    <div class="pred-skeleton-card">
                        <div class="pred-skeleton pred-skeleton-line-sm" style="margin-bottom: 1.5rem;"></div>
                        <div class="pred-skeleton pred-skeleton-line-lg"></div>
                        <div class="pred-flex" style="margin-bottom: 1rem;">
                            <div class="pred-skeleton pred-skeleton-line-xs" style="width: 35%;"></div>
                            <div class="pred-skeleton pred-skeleton-line-xs" style="width: 20%;"></div>
                        </div>
                        <div class="pred-flex" style="margin-bottom: 1.5rem;">
                            <div class="pred-skeleton pred-skeleton-line-xs"></div>
                            <div class="pred-skeleton pred-skeleton-line-xs"></div>
                        </div>
                    </div>
                `;
                totalPredictions.innerHTML = `<div class="pred-skeleton pred-skeleton-stat"></div>`;
                avgConfidence.innerHTML = `<div class="pred-skeleton pred-skeleton-stat"></div>`;
                highestOdds.innerHTML = `<div class="pred-skeleton pred-skeleton-stat"></div>`;
                lowestOdds.innerHTML = `<div class="pred-skeleton pred-skeleton-stat"></div>`;
                avgOdds.innerHTML = `<div class="pred-skeleton pred-skeleton-stat"></div>`;
                winRate.innerHTML = `<div class="pred-skeleton pred-skeleton-stat"></div>`;
                roi.innerHTML = `<div class="pred-skeleton pred-skeleton-stat"></div>`;
                yieldElement.innerHTML = `<div class="pred-skeleton pred-skeleton-stat"></div>`;
                longestStreak.innerHTML = `<div class="pred-skeleton pred-skeleton-stat"></div>`;
                currentStreak.innerHTML = `<div class="pred-skeleton pred-skeleton-stat"></div>`;
                totalProfit.innerHTML = `<div class="pred-skeleton pred-skeleton-stat"></div>`;

                // FIXED: Use CORS-compatible fetch
                const dataUrl = 'https://raw.githubusercontent.com/oscarkemboi/app/master/j2.json';
                const response = await fetchWithCORS(dataUrl);
                
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const jsonData = await response.json();
                const allData = {};
                
                if (jsonData.matches && Array.isArray(jsonData.matches)) {
                    jsonData.matches.forEach(match => {
                        const date = match.Date;
                        if (!allData[date]) {
                            allData[date] = [];
                        }
                        allData[date].push(match);
                    });
                } else {
                    throw new Error('Invalid data format: matches array not found');
                }
                
                if (Object.keys(allData).length === 0) {
                    throw new Error('No data found in JSON');
                }
                
                processData(allData);
                showToast('Data refreshed successfully!');
            } catch (error) {
                showError(`Failed to load predictions data: ${error.message}. Please try again.`);
                console.error('Error fetching data:', error);
                showToast('Error loading data', 5000);
            } finally {
                if (typeof refreshBtn !== 'undefined' && refreshBtn) {
                    refreshBtn.disabled = false;
                    refreshBtn.classList.remove('loading');
                }
            }
        }

        function processData(data) {
            predictionsData = {};
            leagues = new Set();
            years = new Set();
            
            Object.keys(data).forEach(date => {
                const dateObj = new Date(date);
                const matches = data[date];
                const matchesArray = Array.isArray(matches) ? matches : [matches];
                
                matchesArray.forEach(match => {
                    if (match['Actual Score']) {
                        const actualScoreParts = match['Actual Score'].split('-').map(s => parseInt(s.trim()));
                        const totalGoals = actualScoreParts[0] + actualScoreParts[1];
                        match.isWin = match.Win;
                        const scoreBasedWin = (match.Prediction === 'Over2.5' && totalGoals > 2.5) ||
                            (match.Prediction === 'Under2.5' && totalGoals < 2.5);
                        if (match.isWin !== scoreBasedWin) {
                            console.warn(`Inconsistent win status for match on ${date}: ${match['Team A']} vs ${match['Team B']}`);
                        }
                    } else {
                        match.isWin = null;
                    }
                    
                    if (match.Profit !== undefined) {
                        match.calculatedProfit = match.Profit;
                    } else {
                        match.calculatedProfit = match.isWin ? ((match.Odds - 1) * BET_AMOUNT) : -BET_AMOUNT;
                    }
                    
                    const bet = {
                        type: 'single bet',
                        matches: [match],
                        odds: match.Odds,
                        confidence: match.Confidence,
                        date: dateObj,
                        isWin: match.isWin,
                        profit: match.calculatedProfit
                    };
                    
                    if (!predictionsData[date]) {
                        predictionsData[date] = [];
                    }
                    predictionsData[date].push(bet);
                    leagues.add(match.League);
                    years.add(dateObj.getFullYear());
                });
            });
            
            populateLeagueFilter();
            populateYearFilter();
            
            if (isInitialLoad) {
                const currentYear = new Date().getFullYear();
                if (years.has(currentYear)) {
                    yearFilter.value = currentYear;
                }
                // Set default values for new filters
                oddsRangeMin.value = "1.95";
                oddsRangeMax.value = "2.19";
                confidenceRangeMin.value = "56";
                confidenceRangeMax.value = "78";
                isInitialLoad = false;
            }
            
            applyFilters();
        }

        function populateLeagueFilter() {
            leagueFilter.innerHTML = '<option value="all">All Leagues</option>';
            const sortedLeagues = Array.from(leagues).sort();
            sortedLeagues.forEach(league => {
                const option = document.createElement('option');
                option.value = league;
                option.textContent = league;
                leagueFilter.appendChild(option);
            });
        }

        function populateYearFilter() {
            yearFilter.innerHTML = '<option value="all">All Years</option>';
            const sortedYears = Array.from(years).sort((a, b) => b - a);
            sortedYears.forEach(year => {
                const option = document.createElement('option');
                option.value = year;
                option.textContent = year;
                yearFilter.appendChild(option);
            });
        }

        function applyFilters() {
            const searchTerm = searchInput.value.toLowerCase();
            const league = leagueFilter.value;
            const prediction = predictionFilter.value;
            const oddsMin = parseFloat(oddsRangeMin.value) || 0;
            const oddsMax = parseFloat(oddsRangeMax.value) || Infinity;
            const confidenceMin = parseInt(confidenceRangeMin.value) || 0;
            const confidenceMax = parseInt(confidenceRangeMax.value) || 100;
            const matchType = matchTypeFilter.value;
            const month = monthFilter.value;
            const year = yearFilter.value;
            const dateRange = dateRangeFilter.value;
            
            filteredData = {};
            
            Object.keys(predictionsData).forEach(date => {
                const dateObj = new Date(date);
                
                // Apply year filter
                if (year !== 'all' && dateObj.getFullYear() != year) {
                    return;
                }
                
                // Apply month filter
                if (month !== 'all' && dateObj.getMonth() != month) {
                    return;
                }
                
                // Apply date range filter
                if (dateRange !== 'all') {
                    const currentDate = new Date();
                    currentDate.setHours(0, 0, 0, 0);
                    
                    if (dateRange === 'today' && dateObj.toDateString() !== currentDate.toDateString()) {
                        return;
                    }
                    
                    if (dateRange === 'tomorrow') {
                        const tomorrow = new Date(currentDate);
                        tomorrow.setDate(currentDate.getDate() + 1);
                        if (dateObj.toDateString() !== tomorrow.toDateString()) {
                            return;
                        }
                    }
                    
                    if (dateRange === 'week') {
                        const weekStart = new Date(currentDate);
                        weekStart.setDate(currentDate.getDate() - currentDate.getDay());
                        const weekEnd = new Date(weekStart);
                        weekEnd.setDate(weekStart.getDate() + 6);
                        if (dateObj < weekStart || dateObj > weekEnd) {
                            return;
                        }
                    }
                }
                
                const filteredBets = predictionsData[date].filter(bet => {
                    const match = bet.matches[0];
                    const matchesSearch = match['Team A'].toLowerCase().includes(searchTerm) ||
                        match['Team B'].toLowerCase().includes(searchTerm) ||
                        match.League.toLowerCase().includes(searchTerm);
                    if (searchTerm && !matchesSearch) return false;
                    
                    if (league !== 'all' && match.League !== league) return false;
                    if (prediction !== 'all' && match.Prediction !== prediction) return false;
                    
                    // Apply odds range filter
                    if (match.Odds < oddsMin || match.Odds > oddsMax) return false;
                    
                    // Apply confidence range filter (convert to percentage)
                    const confidencePercent = match.Confidence * 100;
                    if (confidencePercent < confidenceMin || confidencePercent > confidenceMax) return false;
                    
                    // Apply match type filter
                    if (matchType !== 'all') {
                        const leagueName = match.League.toLowerCase();
                        if (matchType === 'domestic') {
                            // Exclude cups, qualifiers, international
                            if (leagueName.includes('cup') || leagueName.includes('qualif') ||
                                leagueName.includes('champions league') || leagueName.includes('europa') ||
                                leagueName.includes('international') || leagueName.includes('friendly')) {
                                return false;
                            }
                        } else if (matchType === 'cups') {
                            if (!leagueName.includes('cup')) return false;
                        } else if (matchType === 'qualifiers') {
                            if (!leagueName.includes('qualif')) return false;
                        } else if (matchType === 'international') {
                            if (!leagueName.includes('international') && !leagueName.includes('friendly') &&
                                !leagueName.includes('champions league') && !leagueName.includes('europa')) {
                                return false;
                            }
                        }
                    }
                    
                    return true;
                });
                
                if (filteredBets.length > 0) {
                    filteredData[date] = filteredBets;
                }
            });
            
            updateStats();
            renderPredictions();
            
            // Update filter feedback
            predictionsContainer.classList.remove('filtering');
            const totalMatches = Object.values(filteredData).reduce((sum, bets) => sum + bets.length, 0);
            filterMessage.textContent = `Showing ${totalMatches} matches`;
            liveCounter.textContent = `${totalMatches} matches`;
            liveCounter.classList.add('pulse');
        }

        function updateStats() {
            let totalBets = 0;
            let completedBets = 0;
            let confidenceSum = 0;
            let oddsSum = 0;
            let maxOdds = 0;
            let minOdds = Infinity;
            let profitSum = 0;
            let wins = 0;
            let currentWinningStreak = 0;
            let maxWinningStreak = 0;
            
            const betsWithResults = [];
            
            Object.keys(filteredData).forEach(date => {
                filteredData[date].forEach(bet => {
                    totalBets++;
                    if (bet.isWin !== null) {
                        betsWithResults.push(bet);
                    }
                });
            });
            
            betsWithResults.sort((a, b) => a.date - b.date);
            
            let tempStreak = 0;
            betsWithResults.forEach(bet => {
                completedBets++;
                confidenceSum += bet.confidence;
                oddsSum += bet.odds;
                
                if (bet.odds > maxOdds) {
                    maxOdds = bet.odds;
                }
                if (bet.odds < minOdds) {
                    minOdds = bet.odds;
                }
                
                profitSum += bet.profit;
                
                if (bet.isWin) {
                    wins++;
                    tempStreak++;
                    maxWinningStreak = Math.max(maxWinningStreak, tempStreak);
                } else {
                    tempStreak = 0;
                }
            });
            
            // Calculate current streak
            for (let i = betsWithResults.length - 1; i >= 0; i--) {
                if (betsWithResults[i].isWin) {
                    currentWinningStreak++;
                } else {
                    break;
                }
            }
            
            const winRateValue = completedBets > 0 ? (wins / completedBets * 100).toFixed(0) + '%' : '--';
            const roiValue = completedBets > 0 ? ((profitSum / (completedBets * BET_AMOUNT)) * 100).toFixed(0) + '%' : '--';
            const yieldValue = completedBets > 0 ? ((profitSum / (completedBets * BET_AMOUNT)) * 100).toFixed(0) + '%' : '--';
            const avgConfidenceValue = completedBets > 0 ? ((confidenceSum / completedBets) * 100).toFixed(0) + '%' : '--';
            const avgOddsValue = completedBets > 0 ? (oddsSum / completedBets).toFixed(2) : '--';
            
            totalPredictions.textContent = totalBets;
            avgConfidence.textContent = avgConfidenceValue;
            highestOdds.textContent = maxOdds !== 0 ? maxOdds.toFixed(2) : '--';
            lowestOdds.textContent = minOdds !== Infinity ? minOdds.toFixed(2) : '--';
            avgOdds.textContent = avgOddsValue;
            winRate.textContent = winRateValue;
            roi.textContent = roiValue;
            yieldElement.textContent = yieldValue;
            longestStreak.textContent = maxWinningStreak;
            currentStreak.textContent = currentWinningStreak;
            
            const formattedProfit = new Intl.NumberFormat('en-US', {
                style: 'currency',
                currency: 'EUR',
                currencyDisplay: 'symbol',
                minimumFractionDigits: 0,
                maximumFractionDigits: 0
            }).format(Math.round(profitSum));
            
            totalProfit.textContent = formattedProfit;
            
            if (profitSum > 0) {
                totalProfit.style.color = 'var(--win)';
            } else if (profitSum < 0) {
                totalProfit.style.color = 'var(--loss)';
            } else {
                totalProfit.style.color = '';
            }
            
            if (completedBets > 0) {
                const roiNumber = parseFloat(roiValue);
                const yieldNumber = parseFloat(yieldValue);
                roi.style.color = roiNumber > 0 ? 'var(--win)' : (roiNumber < 0 ? 'var(--loss)' : '');
                yieldElement.style.color = yieldNumber > 0 ? 'var(--win)' : (yieldNumber < 0 ? 'var(--loss)' : '');
            }
        }

        function renderPredictions() {
            predictionsContainer.innerHTML = '';
            const sortedDates = Object.keys(filteredData).sort((a, b) => new Date(b) - new Date(a));
            
            if (sortedDates.length === 0) {
                predictionsContainer.innerHTML = '<div class="pred-no-predictions">No predictions match your criteria.</div>';
                return;
            }
            
            const fragment = document.createDocumentFragment();
            
            sortedDates.forEach(date => {
                filteredData[date].forEach(bet => {
                    const predictionCard = document.createElement('div');
                    predictionCard.className = 'pred-prediction-card';
                    predictionCard.onclick = function () {
                        showMatchDetails(bet.matches[0]);
                    };
                    
                    // Add pulse animation for filtered matches
                    setTimeout(() => {
                        predictionCard.classList.add('filter-match');
                        setTimeout(() => {
                            predictionCard.classList.remove('filter-match');
                        }, 500);
                    }, 100);

                    if (bet.isWin !== null) {
                        const resultClass = bet.isWin ? 'win' : 'loss';
                        predictionCard.classList.add(resultClass);
                        predictionCard.style.borderLeft = `6px solid var(--${resultClass})`;
                    }
                    
                    const match = bet.matches[0];
                    const scoreHTML = match['Actual Score'] ?
                        `<div style="display: flex; flex-wrap: wrap; gap: 0.5rem;"><span class="pred-score">Score: ${match['Actual Score']}</span><span class="pred-result" style="color: ${match.isWin ? 'var(--win)' : 'var(--loss)'}">${match.isWin ? 'Win' : 'Loss'}</span></div>` :
                        '';
                    
                    const formattedDate = new Date(date).toLocaleDateString('en-US', { weekday: 'short', year: 'numeric', month: 'short', day: 'numeric' });
                    
                    const betResultHTML = bet.isWin !== null ?
                        `<span class="pred-bet-result" style="color: ${bet.isWin ? 'var(--win)' : 'var(--loss)'}">${bet.isWin ? 'Win' : 'Loss'}</span>` :
                        '';
                    
                    predictionCard.innerHTML = `
                        <div class="pred-date">${formattedDate}</div>
                        <div class="pred-match">
                            <span class="pred-team">&#x26BD; ${match['Team A']} vs ${match['Team B']}</span>
                            <div style="display: flex; flex-wrap: wrap; gap: 0.5rem; margin-bottom: 0.5rem;">
                                <span class="pred-league">${match.League}</span>
                                <span class="pred-prediction">${match.Prediction}</span>
                            </div>
                            <div style="display: flex; flex-wrap: wrap; gap: 0.5rem; margin-bottom: 0.5rem;">
                                <span class="pred-confidence">Confidence: ${Math.round(match.Confidence * 100)}%</span>
                                <span class="pred-odds">Odds: ${match.Odds.toFixed(2)}</span>
                            </div>
                            ${scoreHTML}
                        </div>
                        <div class="pred-bet-info">
                            <span class="pred-bet-type">Type: ${bet.type}</span>
                            <span class="pred-bet-odds">Odds: ${bet.odds.toFixed(2)}</span>
                            ${betResultHTML}
                            <span class="pred-bet-profit" style="color: ${bet.profit > 0 ? 'var(--win)' : (bet.profit < 0 ? 'var(--loss)' : 'var(--pending)')}" title="${bet.profit === 0 ? 'Result pending – still awaiting update' : ''}">
                                Stake: €100 💰
                                Return ${bet.profit > 0 ? `💵 +💶${bet.profit.toFixed(0)}` : bet.profit < 0 ? `💶${bet.profit.toFixed(0)}` : '⏳'}
                            </span>
                        </div>
                    `;
                    
                    fragment.appendChild(predictionCard);
                });
            });
            
            predictionsContainer.appendChild(fragment);
        }

        function showMatchDetails(match) {
            alert(`Match Details:\n\n${match['Team A']} vs ${match['Team B']}\nLeague: ${match.League}\nPrediction: ${match.Prediction}\nOdds: ${match.Odds}\nConfidence: ${Math.round(match.Confidence * 100)}%\n${match['Actual Score'] ? `Score: ${match['Actual Score']}` : 'Match pending'}`);
        }

        function showError(message) {
            predictionsContainer.innerHTML = `<div class="pred-error">${message}</div>`;
        }

        // Initial data fetch
        fetchData();
    });
</script>
                </div>

                <div class="tab-content">

                    <div id="system2" class="tab-panel">
                        <style>.filters-mobile{display:none;background:#222;border:1px solid #444;}@media (max-width:7680px){.filters-mobile{display:flex;overflow-x:auto;gap:8px;padding:6px 10px;background:#222;border:1px solid #444;align-items:center;white-space:normal;height:auto;flex-wrap:wrap;transition:height 0.3s ease;position:relative;}.filters-mobile.expanded{height:auto;flex-wrap:wrap;white-space:normal;}.filters-mobile .filter-item{flex:0 0 auto;display:inline-flex;flex-direction:column;font-size:12px;margin-bottom:0;min-width:80px;max-width:120px;white-space:normal;color:#ddd;}.filters-mobile .filter-item label{display:none;color:#bbb;}.filters-mobile.expanded .filter-item label{display:block;font-size:13px;margin-bottom:4px;color:#bbb;}.filters-mobile .filter-item select,.filters-mobile .filter-item input{padding:4px 6px;font-size:12px;height:24px;border-radius:2px;border:1px solid #555;background-color:#333;color:#eee;appearance:none;-webkit-appearance:none;-moz-appearance:none;}.filters-mobile .filter-item.search{flex-grow:1;min-width:120px;display:inline-flex;align-items:center;white-space:normal;}.filters-mobile .filter-item.search svg{margin-right:4px;flex-shrink:0;stroke:#eee;}.filters-mobile .filter-item.search input{flex-grow:1;font-size:12px;height:24px;padding:4px 6px;background-color:#333;color:#eee;border:1px solid #555;}.filters-mobile .filter-item button{font-size:12px;padding:4px 8px;height:24px;border-radius:2px;display:inline-flex;align-items:center;white-space:nowrap;background-color:#444;border:1px solid #555;color:#eee;cursor:pointer;}.filters-mobile .filter-item button svg{margin-right:4px;flex-shrink:0;stroke:#eee;}#filter-toggle{position:absolute;right:10px;top:6px;background:#0056b3;color:white;border:none;border-radius:3px;padding:2px 8px;font-size:12px;cursor:pointer;display:flex;align-items:center;z-index:10;user-select:none;}#filter-toggle svg{margin-left:4px;transition:transform 0.3s ease;stroke:white;}.filters-mobile.expanded #filter-toggle svg{transform:rotate(180deg);}.filters-mobile .range-inputs{display:flex;gap:4px;align-items:center;}.filters-mobile .range-inputs input{flex:1;min-width:0;font-size:11px;padding:2px 4px;height:20px;}.filters-mobile .range-inputs span{color:#bbb;font-size:10px;white-space:nowrap;}}</style>

                        <!-- Filter Summary Bar -->
                        <div id="system2-filter-summary" style="display: none; background: var(--bg-medium); padding: 10px 15px; border-radius: var(--border-radius); margin-bottom: 15px; font-size: 0.9rem; color: var(--accent); border-left: 3px solid var(--accent); display: flex; justify-content: space-between; align-items: center;">
                            <span id="system2-filter-message">Applying filters...</span>
                            <span id="system2-live-counter">0 matches</span>
                        </div>

                        <div class="filters-mobile expanded" id="filters-mobile-nav">
                            <div class="filter-item">
                                <label for="system2-league-filter">League</label>
                                <select id="system2-league-filter">
                                    <option value="all">All Leagues</option>
                                    <!-- add options -->
                                </select>
                            </div>
                            <div class="filter-item">
                                <label for="system2-prediction-filter">Prediction</label>
                                <select id="system2-prediction-filter">
                                    <option value="all">All Predictions</option>
                                    <option value="Under2.5">Under 2.5</option>
                                    <option value="Over2.5">Over 2.5</option>
                                </select>
                            </div>
                            <div class="filter-item">
                                <label for="system2-odds-range-min">Odds Range</label>
                                <div class="range-inputs">
                                    <input type="number" id="system2-odds-range-min" placeholder="Min" step="0.01" min="1.0"
                                        max="10.0">
                                    <span>to</span>
                                    <input type="number" id="system2-odds-range-max" placeholder="Max" step="0.01" min="1.0"
                                        max="10.0">
                                </div>
                            </div>
                            <div class="filter-item">
                                <label for="system2-confidence-range-min">Confidence %</label>
                                <div class="range-inputs">
                                    <input type="number" id="system2-confidence-range-min" placeholder="Min" step="1" min="0"
                                        max="100">
                                    <span>to</span>
                                    <input type="number" id="system2-confidence-range-max" placeholder="Max" step="1" min="0"
                                        max="100">
                                </div>
                            </div>
                            <div class="filter-item">
                                <label for="system2-match-type-filter">Match Type</label>
                                <select id="system2-match-type-filter">
                                    <option value="all">All Match Types</option>
                                    <option value="domestic">Domestic Leagues Only</option>
                                    <option value="cups">Cups Only</option>
                                    <option value="qualifiers">Qualifiers Only</option>
                                    <option value="international">International Only</option>
                                </select>
                            </div>
                            <div class="filter-item">
                                <label for="system2-month-filter">Month</label>
                                <select id="system2-month-filter">
                                    <option value="all">All Months</option>
                                    <option value="0">January</option>
                                    <option value="1">February</option>
                                    <option value="2">March</option>
                                    <option value="3">April</option>
                                    <option value="4">May</option>
                                    <option value="5">June</option>
                                    <option value="6">July</option>
                                    <option value="7">August</option>
                                    <option value="8">September</option>
                                    <option value="9">October</option>
                                    <option value="10">November</option>
                                    <option value="11">December</option>
                                </select>
                            </div>
                            <div class="filter-item">
                                <label for="system2-year-filter">Year</label>
                                <select id="system2-year-filter">
                                    <option value="all">All Years</option>
                                    <option value="2023">2023</option>
                                    <option value="2024">2024</option>
                                    <option value="2025">2025</option>
                                    <option value="2026">2026</option>
                                </select>
                            </div>
                            <div class="filter-item">
                                <label for="system2-date-range">Date Range</label>
                                <select id="system2-date-range">
                                    <option value="all">All Dates</option>
                                    <option value="today">Today</option>
                                    <option value="tomorrow">Tomorrow</option>
                                    <option value="week">This Week</option>
                                </select>
                            </div> &nbsp; &nbsp;
                            <div class="filter-item search" role="search"
                                style="display: flex; align-items: center; padding: 4px 8px; height: 32px; box-sizing: border-box; width: 100%; max-width: 100%; gap: 4px;">
                                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24"
                                    fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round" aria-hidden="true" style="flex-shrink: 0;">
                                    <circle cx="11" cy="11" r="8"></circle>
                                    <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                                </svg>
                                <label for="system2-search-input" style="position: absolute; left: -9999px;">Search teams,
                                    leagues...</label>
                                <input type="search" id="system2-search-input" placeholder="Search teams, leagues..."
                                    style="flex: 1; padding: 4px 8px; font-size: inherit; border: 1px solid #ccc; border-radius: 3px; outline: none; box-sizing: border-box; height: 24px;">
                            </div>

                            <script>
                                document.addEventListener('DOMContentLoaded', function () {
                                    const input = document.getElementById('system2-search-input');
                                    if (input) {
                                        input.focus();
                                        input.addEventListener('input', function () {
                                            console.log('Searching:', this.value);
                                        });
                                    }
                                });
                            </script>

                            &nbsp; &nbsp;
                            <div class="filter-item">
                                <button id="system2-refresh-btn">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"
                                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                        stroke-linejoin="round">
                                        <path d="M23 4v6h-6"></path>
                                        <path d="M1 20v-6h6"></path>
                                        <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10"></path>
                                        <path d="M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path>
                                    </svg>
                                    Refresh Data
                                </button>
                            </div>
                            <button id="filter-toggle" aria-expanded="false" aria-controls="filters-mobile-nav"
                                aria-label="Toggle filters">
                                Show Filters
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"
                                    fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round">
                                    <polyline points="6 9 12 15 18 9" />
                                </svg>
                            </button>
                        </div>

                         <script>
                            const filterToggle = document.getElementById('filter-toggle');
                            const filtersMobileNav = document.getElementById('filters-mobile-nav');
                            const leagueFilter = document.getElementById('system2-league-filter');
                            const predictionFilter = document.getElementById('system2-prediction-filter');
                            const oddsRangeMin = document.getElementById('system2-odds-range-min');
                            const oddsRangeMax = document.getElementById('system2-odds-range-max');
                            const confidenceRangeMin = document.getElementById('system2-confidence-range-min');
                            const confidenceRangeMax = document.getElementById('system2-confidence-range-max');
                            const matchTypeFilter = document.getElementById('system2-match-type-filter');
                            const monthFilter = document.getElementById('system2-month-filter');
                            const yearFilter = document.getElementById('system2-year-filter');
                            const dateRangeFilter = document.getElementById('system2-date-range');
                            const searchInput = document.getElementById('system2-search-input');
                            const refreshBtn = document.getElementById('system2-refresh-btn');
                            const filterSummary = document.getElementById('system2-filter-summary');
                            const filterMessage = document.getElementById('system2-filter-message');
                            const liveCounter = document.getElementById('system2-live-counter');

                            // Set default values for new filters
                            document.addEventListener('DOMContentLoaded', function () {
                                oddsRangeMin.value = "1.95";
                                oddsRangeMax.value = "2.19";
                                confidenceRangeMin.value = "56";
                                confidenceRangeMax.value = "78";
                            });

                            function showFilterFeedback() {
                                filterSummary.style.display = 'flex';
                                filterMessage.textContent = 'Applying filters...';
                                liveCounter.classList.remove('pulse');
                            }

                            function applyFilters() {
                                showFilterFeedback();
                                
                                // Collect current filter values
                                const filters = {
                                    league: leagueFilter.value,
                                    prediction: predictionFilter.value,
                                    oddsMin: parseFloat(oddsRangeMin.value) || 0,
                                    oddsMax: parseFloat(oddsRangeMax.value) || Infinity,
                                    confidenceMin: parseInt(confidenceRangeMin.value) || 0,
                                    confidenceMax: parseInt(confidenceRangeMax.value) || 100,
                                    matchType: matchTypeFilter.value,
                                    month: monthFilter.value,
                                    year: yearFilter.value,
                                    dateRange: dateRangeFilter.value,
                                    searchTerm: searchInput.value.trim()
                                };
                                
                                // Here trigger the logic to filter your results, e.g., fetch data or filter displayed items
                                console.log('Applying filters:', filters);

                                // Simulate filter completion
                                setTimeout(() => {
                                    const matchCount = Math.floor(Math.random() * 50) + 10;
                                    filterMessage.textContent = `Showing ${matchCount} matches`;
                                    liveCounter.textContent = `${matchCount} matches`;
                                    liveCounter.classList.add('pulse');
                                }, 500);

                                // For example: reload the data list with these filters or call your backend filter API.
                                // This function should be called from your main filtering logic
                                if (typeof window.applyMainFilters === 'function') {
                                    window.applyMainFilters();
                                }
                            }

                            // Add event listeners to trigger filter application on changes
                            [leagueFilter, predictionFilter, matchTypeFilter, monthFilter, yearFilter, dateRangeFilter].forEach(selectEl => {
                                selectEl.addEventListener('change', applyFilters);
                            });

                            // Add event listeners for range inputs
                            [oddsRangeMin, oddsRangeMax, confidenceRangeMin, confidenceRangeMax].forEach(inputEl => {
                                inputEl.addEventListener('input', function() {
                                    showFilterFeedback();
                                    clearTimeout(this.debounceTimer);
                                    this.debounceTimer = setTimeout(() => {
                                        applyFilters();
                                    }, 300);
                                });
                            });

                            // Trigger filter on search input with debounce to avoid too many calls
                            let debounceTimer = null;
                            searchInput.addEventListener('input', () => {
                                showFilterFeedback();
                                clearTimeout(debounceTimer);
                                debounceTimer = setTimeout(() => {
                                    applyFilters();
                                }, 300);
                            });

                            // Refresh button triggers applying filters (or reloading)
                            refreshBtn.addEventListener('click', () => {
                                showFilterFeedback();
                                applyFilters();
                            });

                            // Toggle button logic unchanged
                            function toggleFilter() {
                                const expanded = filtersMobileNav.classList.toggle('expanded');
                                filterToggle.setAttribute('aria-expanded', expanded);
                                filterToggle.textContent = expanded ? 'Hide Filters' : 'Show Filters';
                                // Re-append arrow icon after text
                                const arrow = document.createElementNS("http://www.w3.org/2000/svg", "svg");
                                arrow.setAttribute("xmlns", "http://www.w3.org/2000/svg");
                                arrow.setAttribute("width", "16");
                                arrow.setAttribute("height", "16");
                                arrow.setAttribute("viewBox", "0 0 24 24");
                                arrow.setAttribute("fill", "none");
                                arrow.setAttribute("stroke", "currentColor");
                                arrow.setAttribute("stroke-width", "2");
                                arrow.setAttribute("stroke-linecap", "round");
                                arrow.setAttribute("stroke-linejoin", "round");
                                const polyline = document.createElementNS("http://www.w3.org/2000/svg", "polyline");
                                polyline.setAttribute("points", "6 9 12 15 18 9");
                                arrow.appendChild(polyline);
                                filterToggle.appendChild(arrow);
                            }
                            filterToggle.addEventListener('click', toggleFilter);
                            filterToggle.addEventListener('keypress', e => {
                                if (e.key === 'Enter' || e.key === ' ') {
                                    e.preventDefault();
                                    toggleFilter();
                                }
                            });
                        </script>

                        <div class="content-card">
                            <div class="stats-bar"></div>
                            <p class="content-text">Our exclusive, analysed free tips daily — 1 to 2 tips per day. Best
                                tips daily — Bestlip created and completely free for everyone.</p>
                            <div style="margin-top: 15px; text-align: center;">
                                <button class="btn-preview" onclick="showSystem2Preview()">
                                    👁️ Quick Preview of Today's Top Picks
                                </button>
                            </div>
                        </div>
                        <section class="stats">
                            <div class="stat-card" onclick="showSystem2MetricDetails('Total Bets', this)">
                                <div class="stat-title" title="The total number of bets that have been placed.">
                                    Total Bets
                                </div>
                                <div class="stat-value" id="system2-total-predictions">
                                    <div class="skeleton skeleton-stat"></div>
                                </div>
                                <div class="stat-hint">Click for details</div>
                            </div>

                            <div class="stat-card" onclick="showSystem2MetricDetails('Avg Confidence', this)">
                                <div class="stat-title"
                                    title="The average confidence level of the predictions. Higher means more certainty.">
                                    Avg Confidence
                                </div>
                                <div class="stat-value" id="system2-avg-confidence">
                                    <div class="skeleton skeleton-stat"></div>
                                </div>
                                <div class="stat-hint">Click for details</div>
                            </div>

                            <div class="stat-card" onclick="showSystem2MetricDetails('Highest Odds', this)">
                                <div class="stat-title"
                                    title="The highest betting odds you have chosen. Bigger odds usually mean bigger risk.">
                                    Highest Odds
                                </div>
                                <div class="stat-value" id="system2-highest-odds">
                                    <div class="skeleton skeleton-stat"></div>
                                </div>
                                <div class="stat-hint">Click for details</div>
                            </div>

                            <div class="stat-card" onclick="showSystem2MetricDetails('Lowest Odds', this)">
                                <div class="stat-title"
                                    title="The lowest betting odds you have chosen. Lower odds usually mean safer bets.">
                                    Lowest Odds
                                </div>
                                <div class="stat-value" id="system2-lowest-odds">
                                    <div class="skeleton skeleton-stat"></div>
                                </div>
                                <div class="stat-hint">Click for details</div>
                            </div>

                            <div class="stat-card" onclick="showSystem2MetricDetails('Average Odds', this)">
                                <div class="stat-title" title="The average odds of all the bets combined.">
                                    Average Odds
                                </div>
                                <div class="stat-value" id="system2-avg-odds">
                                    <div class="skeleton skeleton-stat"></div>
                                </div>
                                <div class="stat-hint">Click for details</div>
                            </div>

                            <div class="stat-card" onclick="showSystem2MetricDetails('Win Rate', this)">
                                <div class="stat-title"
                                    title="The percentage of bets you have won out of all bets placed.">
                                    Win Rate
                                </div>
                                <div class="stat-value" id="system2-win-rate">
                                    <div class="skeleton skeleton-stat"></div>
                                </div>
                                <div class="stat-hint">Click for details</div>
                            </div>

                            <div class="stat-card" onclick="showSystem2MetricDetails('ROI', this)">
                                <div class="stat-title"
                                    title="Return on Investment. Shows how much profit you made compared to the money you spent.">
                                    ROI
                                </div>
                                <div class="stat-value" id="system2-roi">
                                    <div class="skeleton skeleton-stat"></div>
                                </div>
                                <div class="stat-hint">Click for details</div>
                            </div>

                            <div class="stat-card" onclick="showSystem2MetricDetails('Yield', this)">
                                <div class="stat-title" title="Yield shows profit in percentage terms across all bets.">
                                    Yield
                                </div>
                                <div class="stat-value" id="system2-yield">
                                    <div class="skeleton skeleton-stat"></div>
                                </div>
                                <div class="stat-hint">Click for details</div>
                            </div>

                            <div class="stat-card" onclick="showSystem2MetricDetails('Longest Streak', this)">
                                <div class="stat-title"
                                    title="The longest winning streak you have ever had without losing.">
                                    Longest Streak
                                </div>
                                <div class="stat-value" id="system2-longest-streak">
                                    <div class="skeleton skeleton-stat"></div>
                                </div>
                                <div class="stat-hint">Click for details</div>
                            </div>

                            <div class="stat-card" onclick="showSystem2MetricDetails('Current Streak', this)">
                                <div class="stat-title" title="The current ongoing streak of winning or losing.">
                                    Current Streak
                                </div>
                                <div class="stat-value" id="system2-current-streak">
                                    <div class="skeleton skeleton-stat"></div>
                                </div>
                                <div class="stat-hint">Click for details</div>
                            </div>

                            <div class="stat-card" onclick="showSystem2MetricDetails('Total Profit', this)">
                                <div class="stat-title" title="The total profit made in euros (€) after all bets.">
                                    Total Profit (€)
                                </div>
                                <div class="stat-value" id="system2-total-profit">
                                    <div class="skeleton skeleton-stat"></div>
                                </div>
                                <div class="stat-hint">Click for details</div>
                            </div>

                            <div class="stat-card" onclick="openTrialModal()">
                                <div class="stat-title">Subscribe for Free Trial</div>
                                <div class="stat-value" id="total-predictions-promo">
                                    <small>€Trial</small>
                                </div>
                                <div class="stat-hint">Click to subscribe</div>
                            </div>
                        </section>

                        <!-- System 2 Metric Modal -->
                        <div id="system2MetricModal">
                            <div class="modal-content">
                                <h2 id="system2MetricModalTitle">Metric Details</h2>
                                <div id="system2MetricModalContent">
                                    <div class="metric-value">-</div>
                                    <p>Detailed information about this metric.</p>
                                </div>
                                <button onclick="closeSystem2MetricModal()" style="background: var(--accent); color: var(--bg-dark); border: none; padding: 12px 24px; border-radius: 10px; font-size: 16px; font-weight: 600; cursor: pointer; width: 100%;">Close</button>
                            </div>
                        </div>

                        <!-- System 2 Preview Modal -->
                        <div id="system2PreviewModal">
                            <div class="preview-content">
                                <h2 style="color: var(--accent); margin-bottom: 20px; text-align: center;">Today's Top Picks Preview</h2>
                                <div id="system2PreviewContent">
                                    <!-- Content will be loaded dynamically -->
                                </div>
                                <p style="margin-top: 20px; color: var(--text-muted); font-size: 0.9rem; text-align: center;">
                                    Get daily access to all premium picks with our subscription.
                                </p>
                                <div style="display: flex; gap: 10px; margin-top: 20px;">
                                    <button onclick="closeSystem2PreviewModal()" style="flex: 1; background: var(--bg-light); color: var(--text-light); border: none; padding: 10px; border-radius: 8px; cursor: pointer;">Close</button>
                                    <button onclick="closeSystem2PreviewModal(); openTrialModal();" style="flex: 2; background: var(--accent); color: var(--bg-dark); border: none; padding: 10px; border-radius: 8px; font-weight: 600; cursor: pointer;">Get Full Access</button>
                                </div>
                            </div>
                        </div>

                        <div id="trialModal"
                            style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); backdrop-filter: blur(8px); z-index: 10000; align-items: center; justify-content: center; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;">
                            <div
                                style="background: #fff; padding: 40px 30px; border-radius: 20px; text-align: center; max-width: 400px; width: 90%; box-shadow: 0 25px 50px -12px rgba(0,0,0,0.5);">

                                <div id="formContainer">
                                    <div
                                        style="background: #eef2ff; color: #4f46e5; width: 60px; height: 60px; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 20px; font-size: 24px;">
                                        ★</div>
                                    <h2 style="margin: 0 0 10px; color: #111; font-size: 22px; font-weight: 700;">
                                        Join the VIP Trial</h2>
                                    <p style="color: #666; font-size: 15px; line-height: 1.6; margin-bottom: 25px;">
                                        Enter your email to receive our premium match predictions exactly like a VIP
                                        member.</p>

                                    <input type="email" id="userEmail" placeholder="Enter your email"
                                        style="width: 100%; padding: 15px; margin-bottom: 15px; border: 1px solid #ddd; border-radius: 10px; font-size: 16px; box-sizing: border-box; outline: none;">

                                    <button id="submitBtn" onclick="submitTrial()"
                                        style="width: 100%; padding: 15px; background: #111; color: white; border: none; border-radius: 10px; font-size: 16px; font-weight: 600; cursor: pointer; transition: all 0.2s;">
                                        Get My Free Tips
                                    </button>
                                </div>

                                <div id="successContainer" style="display: none;">
                                    <div
                                        style="background: #ecfdf5; color: #10b981; width: 60px; height: 60px; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 20px; font-size: 24px;">
                                        ✓</div>
                                    <h2 style="margin: 0 0 10px; color: #111; font-size: 20px; font-weight: 700;">
                                        Welcome to VIP!</h2>
                                    <p style="color: #666; font-size: 14px; line-height: 1.5; margin-bottom: 15px;">
                                    Check your inbox in a few minutes! You can also view today's tips here:</p>

                                    <a id="displayLink" href="#" target="_blank"
                                        style="display: block; padding: 15px; background: #f3f4f6; color: #4f46e5; border-radius: 10px; text-decoration: underline; font-weight: 700; font-size: 14px; margin-bottom: 10px; word-break: break-all; border: 1px solid #e5e7eb;">
                                    </a>
                                    <p>Note: If the email isn't there, check your Spam folder. To ensure future delivery, move the message to your Inbox or add us to your contacts.</p>
                                </div>

                                <button onclick="closeTrialModal()"
                                    style="background: none; border: none; color: #999; margin-top: 20px; cursor: pointer; font-size: 13px; font-weight: 500;">
                                    Close Window
                                </button>
                            </div>
                        </div>

                        <script>
                            // Trial Modal Functions (existing)
                            function openTrialModal(e) {
                                if (e) e.preventDefault();
                                document.getElementById('trialModal').style.display = 'flex';
                                document.getElementById('formContainer').style.display = 'block';
                                document.getElementById('successContainer').style.display = 'none';
                            }

                            function closeTrialModal() {
                                document.getElementById('trialModal').style.display = 'none';
                            }

                            async function submitTrial() {
                                const emailInput = document.getElementById('userEmail');
                                const btn = document.getElementById('submitBtn');
                                const email = emailInput.value.trim();

                                if (!email || !email.includes('@')) {
                                    alert("Please enter a valid email address.");
                                    return;
                                }

                                const userPart = email.split('@')[0];
                                const personalUrl = "http://vip.betadvisor.club/" + userPart;

                                btn.innerText = "Connecting...";
                                btn.disabled = true;

                                try {
                                    // High-reliability fetch for Ntfy
                                    await fetch('https://vip.betadvisor.club/premium', {
                                        method: 'POST',
                                        body: email,
                                        headers: {
                                            'Content-Type': 'text/plain'
                                        },
                                        // Using keepalive ensures the request finishes even if the UI changes
                                        keepalive: true
                                    });

                                    // Update UI to Success State
                                    document.getElementById('formContainer').style.display = 'none';
                                    const successView = document.getElementById('successContainer');
                                    const linkElem = document.getElementById('displayLink');

                                    // Ensure link is clickable and correct
                                    linkElem.href = personalUrl;
                                    linkElem.innerText = personalUrl;
                                    successView.style.display = 'block';

                                    emailInput.value = "";
                                } catch (error) {
                                    // Fallback: show the link even if the notification server is down
                                    document.getElementById('formContainer').style.display = 'none';
                                    document.getElementById('displayLink').innerText = personalUrl;
                                    document.getElementById('displayLink').href = personalUrl;
                                    document.getElementById('successContainer').style.display = 'block';
                                } finally {
                                    btn.innerText = "Get My Free Tips";
                                    btn.disabled = false;
                                }
                            }
                        </script>
                        </section>

                        <section id="system2-predictions-container" class="predictions-grid">
                            <!-- ===== SKELETON LOADER FOR PREDICTIONS START ===== -->
                            <style>
                                #system2-predictions-container.predictions-grid {
                                    display: grid;
                                    grid-template-columns: 1fr;
                                    gap: 1rem;
                                    width: 100%;
                                }
                                @media (min-width: 600px) {
                                    #system2-predictions-container.predictions-grid {
                                        grid-template-columns: repeat(2, 1fr);
                                    }
                                }
                                @media (min-width: 1024px) {
                                    #system2-predictions-container.predictions-grid {
                                        grid-template-columns: repeat(3, 1fr);
                                    }
                                }
                                #system2-predictions-container .prediction-card {
                                    width: 100%;
                                    margin: 0;
                                }
                            </style>
                            <!-- ===== SKELETON LOADER FOR PREDICTIONS START ===== -->
                            <div class="skeleton-card">
                                <div class="skeleton skeleton-line-sm" style="margin-bottom: 1.5rem;"></div>
                                <div class="skeleton skeleton-line-lg"></div>
                                <div class="flex" style="margin-bottom: 1rem;">
                                    <div class="skeleton skeleton-line-xs" style="width: 35%;"></div>
                                    <div class="skeleton skeleton-line-xs" style="width: 20%;"></div>
                                </div>
                                <div class="flex" style="margin-bottom: 1.5rem;">
                                    <div class="skeleton skeleton-line-xs"></div>
                                    <div class="skeleton skeleton-line-xs"></div>
                                </div>
                                <div class="skeleton skeleton-line-lg"></div>
                                <div class="flex" style="margin-bottom: 1rem;">
                                    <div class="skeleton skeleton-line-xs" style="width: 35%;"></div>
                                    <div class="skeleton skeleton-line-xs" style="width: 20%;"></div>
                                </div>
                                <div class="flex" style="margin-bottom: 1rem;">
                                    <div class="skeleton skeleton-line-xs"></div>
                                    <div class="skeleton skeleton-line-xs"></div>
                                </div>
                            </div>
                            <div class="skeleton-card">
                                <div class="skeleton skeleton-line-sm" style="margin-bottom: 1.5rem;"></div>
                                <div class="skeleton skeleton-line-lg"></div>
                                <div class="flex" style="margin-bottom: 1rem;">
                                    <div class="skeleton skeleton-line-xs" style="width: 35%;"></div>
                                    <div class="skeleton skeleton-line-xs" style="width: 20%;"></div>
                                </div>
                                <div class="flex" style="margin-bottom: 1.5rem;">
                                    <div class="skeleton skeleton-line-xs"></div>
                                    <div class="skeleton skeleton-line-xs"></div>
                                </div>
                                <div class="skeleton skeleton-line-lg"></div>
                                <div class="flex" style="margin-bottom: 1rem;">
                                    <div class="skeleton skeleton-line-xs" style="width: 35%;"></div>
                                    <div class="skeleton skeleton-line-xs" style="width: 20%;"></div>
                                </div>
                                <div class="flex" style="margin-bottom: 1rem;">
                                    <div class="skeleton skeleton-line-xs"></div>
                                    <div class="skeleton skeleton-line-xs"></div>
                                </div>
                            </div>
                            <div class="skeleton-card">
                                <div class="skeleton skeleton-line-sm" style="margin-bottom: 1.5rem;"></div>
                                <div class="skeleton skeleton-line-lg"></div>
                                <div class="flex" style="margin-bottom: 1rem;">
                                    <div class="skeleton skeleton-line-xs" style="width: 35%;"></div>
                                    <div class="skeleton skeleton-line-xs" style="width: 20%;"></div>
                                </div>
                                <div class="flex" style="margin-bottom: 1.5rem;">
                                    <div class="skeleton skeleton-line-xs"></div>
                                    <div class="skeleton skeleton-line-xs"></div>
                                </div>
                            </div>
                            <!-- ===== SKELETON LOADER FOR PREDICTIONS END ===== -->
                        </section>
                    </div>
                    <div id="inplay" class="tab-panel">
                        <div class="content-card">
                            <h3 class="content-title">Premium1 Archive</h3>
                            <div class="stats-bar"></div>
                            <p style="font-size: .75em;">
                                Our Best Bets archive is available from January 2020 up to yesterday's date. Profitable
                                and proven systems that deliver the best football (soccer) tips. Use the dropdown menus
                                to easily navigate through our historical records and explore past winning bets.
                                Remember playing doubles is risk but general profit is still high.
                            </p>
                        </div>
                        <div class="ma-matchDataSection">
                            <div class="ma-dropdown-container">
                                <label for="inplay-yearSelect">Select Year: </label>
                                <select id="inplay-yearSelect" class="ma-yearSelect">
                                    <option value="2020">2020</option>
                                    <option value="2021">2021</option>
                                    <option value="2022">2022</option>
                                    <option value="2023">2023</option>
                                    <option value="2024">2024</option>
                                    <option value="2025">2025</option>
                                    <option value="2026" selected>2026</option>
                                </select>
                                <label for="inplay-monthSelect"> </label>
                                <select id="inplay-monthSelect" class="ma-monthSelect">
                                    <option value="all">All Months</option>
                                </select>
                            </div>
                            <!-- Tabs -->
                            <div class="ma-tab-container">
                                <div x-data>
                                    <button class="ma-tab-button active" data-tab="singles">Singles</button>
                                    <button class="ma-tab-button" data-tab="doubles">Doubles</button>
                                    <button class="ma-tab-button promo-highlight"
                                        @click="window.open('https://shop.betadvisor.club/', '_blank')">Start Your
                                        Free Try</button>
                                    <button class="ma-tab-button"
                                        @click="window.open('https://auto.betadvisor.club/', '_blank')">Monthly
                                        Subscription</button>
                                </div>
                            </div>
                            <div class="ma-tablesContainer"></div>
                            <div class="ma-errorMessage ma-error"></div>
                        </div>
                        <section id="about-betadvisor-club"
                            style="font-family: Arial, sans-serif; line-height: 1.6; max-width: 700px; margin: auto; padding: 1em;">
                            <h2>Why Choose Betadvisor Club Picks?</h2>
                            <p>
                                Betadvisor Club combines cutting-edge AI machine learning models with proven expert
                                tipsters to bring you some of the best football betting predictions available. We use
                                the most advanced AI frameworks in the sports betting market today, continuously refined
                                by real-time data and deep analytics to maximize prediction accuracy.
                            </p>
                            <h3>How Are Our Tipsters Vetted and Tracked?</h3>
                            <p>
                                Our internal team performs rigorous and data-driven vetting of all tipsters. This
                                includes reviewing extensive historical betting data to verify profit/loss, win rates,
                                and return on investment (ROI). We analyze long-term consistency over hundreds of bets,
                                ensuring that tipsters demonstrate genuine skill rather than short-term luck.
                            </p>
                            <p>
                                Tipsters' strategies and staking plans are also scrutinized to confirm they use sound
                                betting principles and manage risk effectively. Performance is tracked transparently
                                with tamper-proof systems that record every tip and its outcome in real-time, ensuring
                                full credibility and accountability.
                            </p>
                            <h3>Subscription Options</h3>
                            <p>
                                We offer a premium package at €24.99 monthly, currently available at a 50% discount. This
                                premium membership grants full access to all AI-enhanced predictions, expert insights,
                                and exclusive content designed to help you maximize your betting success.
                            </p>
                            <h3>Can I Try Free Tips Before Subscribing?</h3>
                            <p>
                                Absolutely! We have a free tips session available, allowing you to try our service for 1
                                day at no cost. This lets you evaluate the quality and accuracy of our tips before
                                committing to a subscription.
                            </p>
                        </section>
                    </div>
                    <script>
                        function initializeTabPanel(containerId, dataSourceUrl) {
                            // Safety check: ensure container exists before proceeding
                            const container = document.getElementById(containerId);
                            if (!container) {
                                console.warn(`Tab panel container '${containerId}' not found.`);
                                return;
                            }

                            // State for this specific panel
                            let currentYear = new Date().getFullYear();
                            let currentMonth = 'all';
                            let currentTab = 'singles';
                            let cachedData = null;

                            // Selectors scoped to the container
                            const yearSelect = container.querySelector('.ma-yearSelect');
                            const monthSelect = container.querySelector('.ma-monthSelect');
                            const tablesContainer = container.querySelector('.ma-tablesContainer');
                            const errorMessage = container.querySelector('.ma-errorMessage');

                            async function reloadMatches() {
                                currentYear = yearSelect.value;
                                currentMonth = monthSelect.value;
                                await fetchAndDisplayMatches(currentYear, currentTab);
                            }

                            function switchTab(tab) {
                                currentTab = tab;
                                container.querySelectorAll('.ma-tab-button').forEach(btn => btn.classList.remove('active'));
                                container.querySelector(`.ma-tab-button[data-tab="${tab}"]`).classList.add('active');
                                if (cachedData) {
                                    renderMatches(cachedData, currentTab);
                                } else {
                                    fetchAndDisplayMatches(currentYear, currentTab);
                                }
                            }

                            // FIXED: Updated fetchAndDisplayMatches to handle different JSON structures
                            async function fetchAndDisplayMatches(year, tab) {
                                tablesContainer.innerHTML = '<p style="text-align:center;color:#aaa;">Loading...</p>';
                                errorMessage.textContent = '';
                                try {
                                    // Try multiple possible URL structures
                                    const urls = [
                                        `${dataSourceUrl}${year}.json`,
                                        `${dataSourceUrl}${year}.json?dvdf`,
                                        `${dataSourceUrl.replace('public_analysis_output_', 'output_')}${year}.json`
                                    ];
                                    
                                    let data = null;
                                    let lastError = null;
                                    
                                    for (const url of urls) {
                                        try {
                                            const proxyUrl = corsProxy(url);
                                            const res = await fetch(proxyUrl);
                                            if (res.ok) {
                                                data = await res.json();
                                                break;
                                            }
                                        } catch (err) {
                                            lastError = err;
                                            continue;
                                        }
                                    }
                                    
                                    if (!data) {
                                        throw new Error(`Failed to load ${year} data: ${lastError?.message || 'All URLs failed'}`);
                                    }
                                    
                                    cachedData = data;
                                    
                                    // Populate month dropdown - handle both JSON structures
                                    monthSelect.innerHTML = '<option value="all">All Months</option>';
                                    const months = cachedData.months || cachedData.data?.months || [];
                                    
                                    if (months.length > 0) {
                                        months.sort((a, b) => new Date(b.month + '-01') - new Date(a.month + '-01')).forEach(month => {
                                            const option = document.createElement('option');
                                            option.value = month.month;
                                            option.textContent = new Date(month.month + '-01').toLocaleString('default', { month: 'long', year: 'numeric' });
                                            monthSelect.appendChild(option);
                                        });
                                    }
                                    renderMatches(cachedData, tab);
                                } catch (err) {
                                    console.error('Fetch error:', err);
                                    tablesContainer.innerHTML = '';
                                    errorMessage.textContent = `Error loading ${year} data: ${err.message}`;
                                }
                            }

                            function renderMatches(data, tab) {
                                tablesContainer.innerHTML = '';
                                // Handle both JSON structures
                                const months = data.months || data.data?.months || [];
                                
                                let filteredMonths = months.sort((a, b) => new Date(b.month + '-01') - new Date(a.month + '-01'));
                                if (currentMonth !== 'all') {
                                    filteredMonths = filteredMonths.filter(month => month.month === currentMonth);
                                }
                                
                                filteredMonths.forEach(month => {
                                    let matches = month.matches.sort((a, b) => new Date(b.date) - new Date(a.date));
                                    if (tab === 'singles') {
                                        const seenDays = new Set();
                                        matches = matches.filter(m => {
                                            const day = m.date?.split(' ')[0];
                                            if (seenDays.has(day)) return false;
                                            seenDays.add(day);
                                            return true;
                                        });
                                    }
                                    if (!matches.length) return;
                                    
                                    const monthHeader = document.createElement('strong');
                                    monthHeader.className = 'ma-month-header';
                                    monthHeader.textContent = `${new Date(month.month + '-01').toLocaleString('default', { month: 'long', year: 'numeric' })} - Under 2.5`;
                                    tablesContainer.appendChild(monthHeader);
                                    
                                    const wrapper = document.createElement('div');
                                    wrapper.className = 'ma-table-wrapper';
                                    tablesContainer.appendChild(wrapper);
                                    
                                    const table = document.createElement('table');
                                    table.innerHTML = `
                                        <thead><tr>
                                            <th>Date</th><th>Match</th><th>Odd</th><th>Score</th><th>Trust</th><th></th>
                                        </tr></thead><tbody></tbody>`;
                                    const tbody = table.querySelector('tbody');
                                    wrapper.appendChild(table);
                                    
                                    matches.forEach(m => {
                                        const tr = document.createElement('tr');
                                        // Handle different field names
                                        const odds = m.final_odds || m.odd || 'N/A';
                                        const score = (m.score && m.score.trim() !== '') ? m.score : 'Pending';
                                        const roundedH2H = m.h2h_under ? Math.round(parseFloat(m.h2h_under)) + '%' : 'N/A';
                                        tr.innerHTML = `
                                            <td>&#x26BD; ${m.date || 'N/A'}</td>
                                            <td>${m.match || 'N/A'}</td>
                                            <td>${odds}</td>
                                            <td>${score}</td>
                                            <td>${roundedH2H}</td>`;
                                        tbody.appendChild(tr);
                                    });
                                    
                                    const total = matches.length;
                                    const wins = matches.filter(m => m.status === '✅').length;
                                    const avgOdds = (matches.reduce((s, m) => {
                                        const o = parseFloat(m.final_odds || m.odd);
                                        return isNaN(o) ? s : s + o;
                                    }, 0) / (total || 1)).toFixed(2);
                                    const winPct = total ? ((wins / total) * 100).toFixed(2) : 0;
                                    
                                    const sumRow = document.createElement('tr');
                                    sumRow.className = 'ma-summary';
                                    sumRow.innerHTML = `
                                        <td colspan="2">Total: ${total}</td>
                                        <td colspan="2">Win%: ${winPct}%</td>
                                        <td colspan="2">Avg Odds: ${avgOdds}</td>`;
                                    tbody.appendChild(sumRow);
                                });
                            }
                            
                            // Event listeners
                            yearSelect.addEventListener('change', reloadMatches);
                            monthSelect.addEventListener('change', reloadMatches);
                            container.querySelectorAll('.ma-tab-button[data-tab]').forEach(btn => {
                                btn.addEventListener('click', () => switchTab(btn.dataset.tab));
                            });

                            // Initial load
                            fetchAndDisplayMatches(currentYear, currentTab);
                        }

                        // Initialize both panels
                        document.addEventListener('DOMContentLoaded', () => {
                            initializeTabPanel('inplay', 'https://raw.githubusercontent.com/oscarkemboi/app/refs/heads/main/public/system2/public_analysis_output_');
                            initializeTabPanel('inplay2', 'https://raw.githubusercontent.com/oscarkemboi/app/refs/heads/main/public/system3/public_analysis_output_');
                        });
                    </script>

                    <div id="inplay2" class="tab-panel">
                        <div class="content-card">
                            <h3 class="content-title">Premiums Archive</h3>
                            <div class="stats-bar"></div>
                            <p style="font-size: .75em;">
                                Our Best Bets archive is available from January 2020 up to yesterday's date. These tips
                                were sent exclusively to our premium members and include both singles and doubles. All
                                bets come from proven systems that deliver the best football (soccer) tips. Use the
                                dropdown menus to easily navigate through our historical records and explore past
                                winning bets.
                            </p>
                        </div>
                        <div id="ma-matchDataSection">
                            <div class="ma-dropdown-container">
                                <label for="ma-yearSelect">Select Year: </label>
                                <select id="ma-yearSelect" onchange="maReloadMatches()">
                                    <option value="2020">2020</option>
                                    <option value="2021">2021</option>
                                    <option value="2022">2022</option>
                                    <option value="2023">2023</option>
                                    <option value="2024">2024</option>
                                    <option value="2025">2025</option>
                                    <option value="2026" selected>2026</option>
                                </select>
                                <label for="ma-monthSelect"> </label>
                                <select id="ma-monthSelect" onchange="maReloadMatches()">
                                    <option value="all">All Months</option>
                                </select>
                            </div>
                            <!-- Tabs -->
                            <div class="ma-tab-container">
                                <div x-data>
                                    <button class="ma-tab-button active"
                                        onclick="maSwitchTab('singles')">Singles</button>
                                    <button class="ma-tab-button" onclick="maSwitchTab('doubles')">Doubles</button>
                                    <!-- New Buttons with Alpine.js click handlers -->
                                    <button class="ma-tab-button promo-highlight"
                                        @click="window.open('https://shop.betadvisor.club/', '_blank')">Start Your
                                        Trial</button>
                                    <button class="ma-tab-button"
                                        @click="window.open('https://auto.betadvisor.club/', '_blank')">Monthly
                                        Subscription</button>
                                </div>
                            </div>
                            <div id="ma-tablesContainer"></div>
                            <div id="ma-errorMessage" class="ma-error"></div>
                        </div>
                        <script>
                            let maCurrentYear = '2026';
                            let maCurrentMonth = 'all';
                            let maCurrentTab = 'singles'; // default
                            let maCachedData = null;

                            async function maReloadMatches() {
                                maCurrentYear = document.getElementById('ma-yearSelect').value;
                                maCurrentMonth = document.getElementById('ma-monthSelect').value;
                                maFetchAndDisplayMatches(maCurrentYear, maCurrentTab);
                            }

                            function maSwitchTab(tab) {
                                maCurrentTab = tab;
                                document.querySelectorAll('.ma-tab-button').forEach(btn => btn.classList.remove('active'));
                                document.querySelector(`.ma-tab-button:nth-child(${tab === 'doubles' ? 1 : 2})`).classList.add('active');
                                if (maCachedData) {
                                    maRenderMatches(maCachedData, maCurrentTab);
                                } else {
                                    maFetchAndDisplayMatches(maCurrentYear, maCurrentTab);
                                }
                            }

                            // FIXED: Updated maFetchAndDisplayMatches to handle different JSON structures
                            async function maFetchAndDisplayMatches(year, tab) {
                                const tablesContainer = document.getElementById('ma-tablesContainer');
                                const errorMessage = document.getElementById('ma-errorMessage');
                                tablesContainer.innerHTML = '<p style="text-align:center;color:#aaa;">Loading...</p>';
                                errorMessage.textContent = '';
                                
                                try {
                                    // Try multiple possible URL structures
                                    const urls = [
                                        `https://raw.githubusercontent.com/oscarkemboi/app/refs/heads/main/public/public_analysis_output_${year}.json`,
                                        `https://raw.githubusercontent.com/oscarkemboi/app/refs/heads/main/public/public_analysis_output_${year}.json?dvdf`,
                                        `https://raw.githubusercontent.com/oscarkemboi/app/refs/heads/main/public/output_${year}.json`,
                                        `https://raw.githubusercontent.com/oscarkemboi/app/refs/heads/main/public/system3/public_analysis_output_${year}.json`
                                    ];
                                    
                                    let data = null;
                                    let lastError = null;
                                    
                                    for (const url of urls) {
                                        try {
                                            const proxyUrl = corsProxy(url);
                                            const res = await fetch(proxyUrl);
                                            if (res.ok) {
                                                data = await res.json();
                                                break;
                                            }
                                        } catch (err) {
                                            lastError = err;
                                            continue;
                                        }
                                    }
                                    
                                    if (!data) {
                                        throw new Error(`Failed to load ${year} data: ${lastError?.message || 'All URLs failed'}`);
                                    }
                                    
                                    maCachedData = data;
                                    
                                    // Populate month dropdown - handle both JSON structures
                                    const monthSelect = document.getElementById('ma-monthSelect');
                                    monthSelect.innerHTML = '<option value="all">All Months</option>';
                                    const months = maCachedData.months || maCachedData.data?.months || [];
                                    
                                    if (months.length > 0) {
                                        months.sort((a, b) => new Date(b.month + '-01') - new Date(a.month + '-01')).forEach(month => {
                                            const option = document.createElement('option');
                                            option.value = month.month;
                                            option.textContent = new Date(month.month + '-01').toLocaleString('default', { month: 'long', year: 'numeric' });
                                            monthSelect.appendChild(option);
                                        });
                                    }
                                    maRenderMatches(maCachedData, tab);
                                } catch (err) {
                                    console.error('Fetch error:', err);
                                    tablesContainer.innerHTML = '';
                                    errorMessage.textContent = `Error: Failed to load ${year} data`;
                                }
                            }

                            function maRenderMatches(data, tab) {
                                const tablesContainer = document.getElementById('ma-tablesContainer');
                                tablesContainer.innerHTML = '';
                                
                                // Handle both JSON structures
                                const months = data.months || data.data?.months || [];
                                
                                let filteredMonths = months.sort((a, b) => new Date(b.month + '-01') - new Date(a.month + '-01'));
                                if (maCurrentMonth !== 'all') {
                                    filteredMonths = filteredMonths.filter(month => month.month === maCurrentMonth);
                                }
                                
                                filteredMonths.forEach(month => {
                                    let matches = month.matches.sort((a, b) => new Date(b.date) - new Date(a.date));
                                    if (tab === 'singles') {
                                        const seenDays = new Set();
                                        matches = matches.filter(m => {
                                            const day = m.date?.split(' ')[0];
                                            if (seenDays.has(day)) return false;
                                            seenDays.add(day);
                                            return true;
                                        });
                                    }
                                    if (!matches.length) return;
                                    
                                    const monthHeader = document.createElement('strong');
                                    monthHeader.className = 'ma-month-header';
                                    monthHeader.textContent = `${new Date(month.month + '-01').toLocaleString('default', { month: 'long', year: 'numeric' })} - Under 2.5`;
                                    tablesContainer.appendChild(monthHeader);
                                    
                                    const wrapper = document.createElement('div');
                                    wrapper.className = 'ma-table-wrapper';
                                    tablesContainer.appendChild(wrapper);
                                    
                                    const table = document.createElement('table');
                                    table.innerHTML = `
                                        <thead><tr>
                                            <th>Date</th><th>Match</th><th>Odd</th><th>Score</th><th>Trust</th><th></th>
                                        </tr></thead><tbody></tbody>`;
                                    const tbody = table.querySelector('tbody');
                                    wrapper.appendChild(table);
                                    
                                    matches.forEach(m => {
                                        const tr = document.createElement('tr');
                                        // Handle different field names
                                        const odds = m.final_odds || m.odd || 'N/A';
                                        const score = (m.score && m.score.trim() !== '') ? m.score : 'Pending';
                                        const roundedH2H = m.h2h_under ? Math.round(parseFloat(m.h2h_under)) + '%' : 'N/A';
                                        tr.innerHTML = `
                                            <td>&#x26BD; ${m.date || 'N/A'}</td>
                                            <td>${m.match || 'N/A'}</td>
                                            <td>${odds}</td>
                                            <td>${score}</td>
                                            <td>${roundedH2H}</td>`;
                                        tbody.appendChild(tr);
                                    });
                                    
                                    const total = matches.length;
                                    const wins = matches.filter(m => m.status === '✅').length;
                                    const avgOdds = (matches.reduce((s, m) => {
                                        const o = parseFloat(m.final_odds || m.odd);
                                        return isNaN(o) ? s : s + o;
                                    }, 0) / (total || 1)).toFixed(2);
                                    const winPct = total ? ((wins / total) * 100).toFixed(2) : 0;
                                    
                                    const sumRow = document.createElement('tr');
                                    sumRow.className = 'ma-summary';
                                    sumRow.innerHTML = `
                                        <td colspan="2">Total: ${total}</td>
                                        <td colspan="2">Win%: ${winPct}%</td>
                                        <td colspan="2">Avg Odds: ${avgOdds}</td>`;
                                    tbody.appendChild(sumRow);
                                });
                            }

                            document.addEventListener('DOMContentLoaded', () => {
                                maFetchAndDisplayMatches(maCurrentYear, maCurrentTab);
                            });
                        </script>
                        <section id="about-betadvisor-club"
                            style="font-family: Arial, sans-serif; line-height: 1.6; max-width: 700px; margin: auto; padding: 1em;">
                            <h2>Why Choose Betadvisor Club Picks?</h2>
                            <p>
                                Betadvisor Club combines cutting-edge AI machine learning models with proven expert
                                tipsters to bring you some of the best football betting predictions available. We use
                                the most advanced AI frameworks in the sports betting market today, continuously refined
                                by real-time data and deep analytics to maximize prediction accuracy.
                            </p>
                            <h3>How Are Our Tipsters Vetted and Tracked?</h3>
                            <p>
                                Our internal team performs rigorous and data-driven vetting of all tipsters. This
                                includes reviewing extensive historical betting data to verify profit/loss, win rates,
                                and return on investment (ROI). We analyze long-term consistency over hundreds of bets,
                                ensuring that tipsters demonstrate genuine skill rather than short-term luck.
                            </p>
                            <p>
                                Tipsters' strategies and staking plans are also scrutinized to confirm they use sound
                                betting principles and manage risk effectively. Performance is tracked transparently
                                with tamper-proof systems that record every tip and its outcome in real-time, ensuring
                                full credibility and accountability.
                            </p>
                            <h3>Subscription Options</h3>
                            <p>
                                We offer a premium package at €24.99 monthly, currently available at a 50% discount. This
                                premium membership grants full access to all AI-enhanced predictions, expert insights,
                                and exclusive content designed to help you maximize your betting success.
                            </p>
                            <h3>Can I Try Free Tips Before Subscribing?</h3>
                            <p>
                                Absolutely! We have a free tips session available, allowing you to try our service for 1
                                day at no cost. This lets you evaluate the quality and accuracy of our tips before
                                committing to a subscription.
                            </p>
                        </section>
                    </div>

                    <div id="casino" class="tab-panel active">
                        <div class="content-card">
                            <h3 class="content-title">Our History Records</h3>
                            <div id="preview" style="border: 1px solid #ccc; min-height: 400px; padding: 10px;"></div>

<script>
fetch('https://raw.githubusercontent.com/komodo513/b/refs/heads/main/assets/history.html')
  .then(response => response.text())
  .then(html => {
    document.getElementById('preview').innerHTML = html;
  })
  .catch(error => {
    document.getElementById('preview').innerHTML = 'Load failed';
    console.error(error);
  });
</script>

                            <div id="ntfy-widget-container"
                                style="background:#0f111a;color:#e4e6eb;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Arial,sans-serif;padding:20px;min-height:100vh;width:100%;box-sizing:border-box;overflow-y:auto">
                                <div style="max-width:1000px;margin:0 auto">
                                    <div
                                        style="border-bottom:2px solid #1f2235;padding-bottom:20px;margin-bottom:20px;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:15px">
                                        <div>

                                            <h2 style="margin:0;color:#fff;font-size:24px;letter-spacing:-.5px">
                                                Betadvisor <span style="color:#fc0">Most Recent VIP</span> Feed</h2>
                                            <p style="margin:5px 0 0;color:#8b8e9f;font-size:14px">Verified Records •
                                                <span id="last-sync">Syncing...</span> • Next sync <span
                                                    id="next-sync">in 60m</span></p>
                                        </div>
                                        <div style="display:flex;align-items:center;gap:10px"><a
                                                href="https://shop.betadvisor.club/" target="_blank"
                                                style="background:#2e89ff;color:#fff;text-decoration:none;padding:8px 16px;border-radius:6px;font-size:13px;font-weight:700;transition:0.2s;border:1px solid #2e89ff">
                                                Subscribe</a>
                                                <a
                                                href="https://b-henna.vercel.app/assets/premium_report.html" target="_blank"
                                                style="background:#2e89ff;color:#fff;text-decoration:none;padding:8px 16px;border-radius:6px;font-size:13px;font-weight:700;transition:0.2s;border:1px solid #2e89ff">
                                                Records Analysis</a>
                                                
                                            <div id="msg-count"
                                                style="font-size:12px;background:#1a1d2e;border:1px solid #0f8;color:#0f8;padding:7px 14px;border-radius:30px;font-weight:700;text-transform:uppercase;white-space:nowrap">
                                                ● Records Live</div>
                                        </div>
                                    </div>
                                    <div id="ntfy-list" style="display:flex;flex-direction:column;gap:20px">
                                        <p id="ntfy-status"
                                            style="color:#8b8e9f;text-align:center;margin-top:50px;font-style:italic">
                                            Verifying VIP stream...</p>
                                    </div>
                                </div>  
                                <script>(function () { const l = document.getElementById('ntfy-list'), s = document.getElementById('ntfy-status'), c = document.getElementById('msg-count'), t = document.getElementById('last-sync'), nx = document.getElementById('next-sync'), M = 3; let e, rem = 60; const uT = () => t.innerText = 'Last Update: ' + new Date().toLocaleTimeString(); const conn = () => { if (e) e.close(); e = new EventSource('https://vip.betadvisor.club/history/sse?poll=1'); e.onopen = () => { c.innerText = '● Records Live'; c.style.color = '#0f8'; c.style.borderColor = '#0f8'; uT() }; e.onmessage = (e) => { const d = JSON.parse(e.data); if (d.event !== 'message') return; if (s) s.remove(); uT(); let m = d.message.replace(/You received a file: .*/g, '').trim(); const i = document.createElement('div'); i.className = 'ntfy-item'; i.style.cssText = "background:#1a1d2e;padding:25px;border-radius:12px;border:1px solid #282c44;box-shadow:0 10px 30px rgba(0,0,0,.5);width:100%;box-sizing:border-box"; let a = ''; if (d.attachment) { const u = d.attachment.url; if (/\.(jpg|jpeg|png|gif|webp)$/i.test(d.attachment.name || '')) { a = `<div style="margin-top:20px;border-radius:8px;overflow:hidden;background:#000;border:1px solid #333"><img src="${u}" style="width:100%;cursor:zoom-in;transition:transform .3s ease;display:block" onclick="z(this)"></div>` } } i.innerHTML = `<div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:15px"><span style="font-weight:700;color:#fc0;font-size:18px;text-transform:uppercase;letter-spacing:1px">${d.title || 'VIP Update'}</span><span style="font-size:11px;color:#5c5f77;background:#0f111a;padding:3px 8px;border-radius:4px">${new Date(d.time * 1000).toLocaleTimeString()}</span></div>${m ? `<div style="font-size:16px;line-height:1.6;color:#e4e6eb;background:#22263d;padding:15px;border-radius:8px;border-left:4px solid #fc0">${m}</div>` : ''}${a}`; l.insertBefore(i, l.firstChild); while (l.getElementsByClassName('ntfy-item').length > M) l.removeChild(l.lastChild) }; e.onerror = () => { } }; conn(); setInterval(() => { rem--; if (rem <= 0) { rem = 60; l.innerHTML = ''; conn() } nx.innerText = `in ${rem}m` }, 60000); window.z = (g) => { const s = g.style.transform === 'scale(1.5)'; g.style.transform = s ? 'scale(1)' : 'scale(1.5)'; g.style.cursor = s ? 'zoom-in' : 'zoom-out'; g.parentElement.style.zIndex = s ? "1" : "100"; g.parentElement.style.overflow = s ? 'hidden' : 'visible' } })();</script>
                            </div>
                            <h3 class="content-title">Other Best Tipsters</h3>
                            <div class="stats-bar"></div>
                            <p class="content-text">
                                Tips from the best tipster at a time, trusted worldwide with proven records. Archives
                                included. Subscription is limited to one top active tipster only.
                            </p>
                            <div class="feature-grid">
                                <div class="feature-item">#1. Sports_PicksKE - Football (active)</div>
                                <div class="feature-item">#2. Foregoal_Tipster - Football (inactive)</div>
                                <div class="feature-item">#3. Gooner Jay - Olbg Horse racing (inactive)</div>
                            </div>
                            <table border="1" cellpadding="5" cellspacing="0" width="100%">
                                <thead>
                                    <tr>
                                        <th colspan="2">Tipster: #1 Sports_PicksKE - Football (Active)</th>
                                    </tr>
                                    <tr>
                                        <th width="15%">Year</th>
                                        <th>Records</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>2024</td>
                                        <td>
                                            <a class="prediction"
                                                href="https://web.archive.org/web/20241009231406/https://pickskenya.online/history-sheet/?review-for=2024-04"
                                                target="_blank" rel="noopener noreferrer">Apr 2024</a> |
                                            <a class="prediction"
                                                href="https://web.archive.org/web/20241009231406/https://pickskenya.online/history-sheet/?review-for=2024-03"
                                                target="_blank" rel="noopener noreferrer">Mar 2024</a> |
                                            <a class="prediction"
                                                href="https://web.archive.org/web/20241009231406/https://pickskenya.online/history-sheet/?review-for=2024-02"
                                                target="_blank" rel="noopener noreferrer">Feb 2024</a> |
                                            <a class="prediction"
                                                href="https://web.archive.org/web/20241009231406/https://pickskenya.online/history-sheet/?review-for=2024-01"
                                                target="_blank" rel="noopener noreferrer">Jan 2024</a>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>2023</td>
                                        <td>
                                            <a class="prediction"
                                                href="https://web.archive.org/web/20241009231406/https://pickskenya.online/history-sheet/?review-for=2023-11"
                                                target="_blank" rel="noopener noreferrer">Nov</a> |
                                            <a class="prediction"
                                                href="https://web.archive.org/web/20241009231406/https://pickskenya.online/history-sheet/?review-for=2023-10"
                                                target="_blank" rel="noopener noreferrer">Oct</a> |
                                            <a class="prediction"
                                                href="https://web.archive.org/web/20241009231406/https://pickskenya.online/history-sheet/?review-for=2023-09"
                                                target="_blank" rel="noopener noreferrer">Sep</a> |
                                            <a class="prediction"
                                                href="https://web.archive.org/web/20241009231406/https://pickskenya.online/history-sheet/?review-for=2023-08"
                                                target="_blank" rel="noopener noreferrer">Aug</a> |
                                            <a class="prediction"
                                                href="https://web.archive.org/web/20241009231406/https://pickskenya.online/history-sheet/?review-for=2023-07"
                                                target="_blank" rel="noopener noreferrer">Jul</a> |
                                            <a class="prediction"
                                                href="https://web.archive.org/web/20241009231406/https://pickskenya.online/history-sheet/?review-for=2023-06"
                                                target="_blank" rel="noopener noreferrer">Jun</a> |
                                            <a class="prediction"
                                                href="https://web.archive.org/web/20241009231406/https://pickskenya.online/history-sheet/?review-for=2023-05"
                                                target="_blank" rel="noopener noreferrer">May</a> |
                                            <a class="prediction"
                                                href="https://web.archive.org/web/20241009231406/https://pickskenya.online/history-sheet/?review-for=2023-04"
                                                target="_blank" rel="noopener noreferrer">Apr</a> |
                                            <a class="prediction"
                                                href="https://web.archive.org/web/20241009231406/https://pickskenya.online/history-sheet/?review-for=2023-03"
                                                target="_blank" rel="noopener noreferrer">Mar</a> |
                                            <a class="prediction"
                                                href="https://web.archive.org/web/20241009231406/https://pickskenya.online/history-sheet/?review-for=2023-02"
                                                target="_blank" rel="noopener noreferrer">Feb</a> |
                                            <a class="prediction"
                                                href="https://web.archive.org/web/20241009231406/https://pickskenya.online/history-sheet/?review-for=2023-01"
                                                target="_blank" rel="noopener noreferrer">Jan</a>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>Full Year Records</td>
                                        <td>
                                            <a class="prediction"
                                                href="https://web.archive.org/web/20241009231406/https://pickskenya.online/history-sheet/#2023"
                                                target="_blank" rel="noopener noreferrer">2023/24</a> |
                                            <a class="prediction"
                                                href="https://web.archive.org/web/20241009231406/https://pickskenya.online/2022-combined-history/"
                                                target="_blank" rel="noopener noreferrer">2022</a> |
                                            <a class="prediction"
                                                href="https://web.archive.org/web/20241009231406/https://pickskenya.online/2021-combined-history/"
                                                target="_blank" rel="noopener noreferrer">2021</a> |
                                            <a class="prediction"
                                                href="https://web.archive.org/web/20241009231406/https://pickskenya.online/2020-combined-history/"
                                                target="_blank" rel="noopener noreferrer">2020</a> |
                                            <a class="prediction"
                                                href="https://web.archive.org/web/20241009231406/https://pickskenya.online/2019-combined-history/"
                                                target="_blank" rel="noopener noreferrer">2019</a> |
                                            <a class="prediction"
                                                href="https://web.archive.org/web/20241009231406/https://pickskenya.online/2018-combined-history/"
                                                target="_blank" rel="noopener noreferrer">2018</a> |
                                            <a class="prediction"
                                                href="https://web.archive.org/web/20241009231406/https://pickskenya.online/2017-combined-history/"
                                                target="_blank" rel="noopener noreferrer">2017</a> |
                                            <a class="prediction"
                                                href="https://web.archive.org/web/20241009231406/https://pickskenya.online/2016-combined-value-bet-history-sheet/"
                                                target="_blank" rel="noopener noreferrer">2016</a> |
                                            <a class="prediction"
                                                href="https://web.archive.org/web/20241009231406/https://pickskenya.online/2015/12/"
                                                target="_blank" rel="noopener noreferrer">2015</a>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>

                        </div>

                    </div>

                    <div id="live-casino" class="tab-panel">
                        <div class="content-card">
                            <h3 class="content-title">Live Casino</h3>
                            <div class="stats-bar"></div>
                            <p class="content-text">[COMING SOON] - Real dealers, real-time gaming with HD streaming and
                                interactive features.</p>
                            <div class="feature-grid">
                                <div class="feature-item">Live Dealers</div>
                                <div class="feature-item">HD Stream</div>
                                <div class="feature-item">Chat Feature</div>
                                <div class="feature-item">VIP Tables</div>
                            </div>
                        </div>
                    </div>
                    <div id="games" class="tab-panel">
                        <div class="content-card">
                            <h3 class="content-title">Games</h3>
                            <div class="stats-bar"></div>
                            <p class="content-text">[COMING SOON] - Instant games and arcade-style entertainment with
                                quick play options.</p>
                            <div class="feature-grid">
                                <div class="feature-item">Instant Win</div>
                                <div class="feature-item">Scratch Cards</div>
                                <div class="feature-item">Arcade</div>
                                <div class="feature-item">Mini Games</div>
                            </div>
                        </div>
                    </div>

                    <div id="poker" class="tab-panel">
                        <div class="content-card">
                            <h3 class="content-title">Poker</h3>
                            <div class="stats-bar"></div>
                            <p class="content-text">[COMING SOON] - Professional poker tournaments and cash games with
                                various formats.</p>
                            <div class="feature-grid">
                                <div class="feature-item">Tournaments</div>
                                <div class="feature-item">Cash Games</div>
                                <div class="feature-item">Sit & Go</div>
                                <div class="feature-item">Fast Fold</div>
                            </div>
                        </div>
                    </div>

                    <div id="bingo" class="tab-panel">
                        <div class="content-card">
                            <h3 class="content-title">Bingo</h3>
                            <div class="stats-bar"></div>
                            <p class="content-text">[COMING SOON] - Community bingo with chat features and progressive
                                jackpots.</p>
                            <div class="feature-grid">
                                <div class="feature-item">90 Ball</div>
                                <div class="feature-item">75 Ball</div>
                                <div class="feature-item">Chat Rooms</div>
                                <div class="feature-item">Jackpots</div>
                            </div>
                        </div>
                    </div>

                    <div id="vegas" class="tab-panel">
                        <div class="content-card">
                            <h3 class="content-title">About BetAdvisor Club</h3>
                            <div class="stats-bar"></div>
                            <section id="about-us">
                                <p>
                                    BetAdvisor Club was started in December 2015. Our aim was not only to find betting
                                    systems that bookmakers fear, but also to create a long-term investment system like
                                    buying property, with steady returns. Over the years, we've improved our methods to
                                    find better and smarter ways. The betting world is full of sharks and liars, we
                                    started this service despite all setbacks to be useful, transparent and even
                                    responsible. Honesty is our main key.
                                </p>
                                <p>Look, 95% of punters lose. Our job is to drag you into the other remaining 5%. We use
                                    Mathematical and AI to find the real value bet tips.
                                    We also have our own team of tipsters and also work with some of the best experts
                                    from around the world. Although hiring top tipsters can be costly, the results and
                                    value they bring make it worthwhile.
                                </p>
                                <p>
                                    Our service helps people who spend lots of time analysing data but often end up
                                    confused. We want to make it simple and clear, so you can make good profits each
                                    month. Our prices are designed so that even after renewing your subscription, you
                                    should still end up with a healthy profit.
                                </p>
                                <p>
                                    Apart from the biggest secret of winning which is bankroll management. Example,
                                    recommend betting at least $100 per betslip, with $50 as a minimum for smaller
                                    stakes. THis has helper our members stsy longer in the marketwhile making profit.
                                    One challenge we face is that when many members bet on the same matches, the odds
                                    can drop. To keep value high, we limit membership to just 40 people per month. We
                                    also ask members not to resell or share tips, which helps prevent odds from falling.
                                </p>
                                <p>
                                    If you subscribe to our singles package, priced at $50 per day, we offer a 120%
                                    money-back guarantee if you lose, plus a free tip the next day. This way, you always
                                    have a chance to win-it's a true win-win.
                                </p>
                            </section>
                        </div>
                    </div>


                </div>
            </div>

            <script>
                function switchTab(evt, tabName) {
                    document.querySelectorAll(".tab-panel").forEach(panel => panel.classList.remove("active"));
                    document.querySelectorAll(".tab-button").forEach(btn => btn.classList.remove("active"));
                    document.getElementById(tabName).classList.add("active");
                    
                    // Handle both button clicks and select changes
                    if (evt.currentTarget) {
                        // For buttons, currentTarget is the button
                        if (evt.currentTarget.classList.contains('tab-button')) {
                            evt.currentTarget.classList.add("active");
                        } else {
                            // For select, find the parent .tab-button or the select itself
                            const parentButton = evt.currentTarget.closest('.tab-button');
                            if (parentButton) {
                                parentButton.classList.add("active");
                            } else {
                                evt.currentTarget.classList.add("active");
                            }
                        }
                    }
                    
                    // Update URL with anchor hash
                    history.pushState(null, null, '#' + tabName);
                }

                // Handle browser back/forward navigation
                window.addEventListener('popstate', function() {
                    const hash = window.location.hash.slice(1);
                    if (hash) {
                        const tabButton = Array.from(document.querySelectorAll('.tab-button')).find(
                            btn => btn.getAttribute('onclick')?.includes(`'${hash}'`)
                        );
                        if (tabButton) {
                            tabButton.click();
                        }
                    }
                });

                // Activate tab from URL hash on page load
                document.addEventListener('DOMContentLoaded', function() {
                    const hash = window.location.hash.slice(1);
                    if (hash) {
                        const tabButton = Array.from(document.querySelectorAll('.tab-button')).find(
                            btn => btn.getAttribute('onclick')?.includes(`'${hash}'`)
                        );
                        if (tabButton) {
                            tabButton.click();
                        }
                    }
                });

                function scrollTabs(direction) {
                    const container = document.querySelector('.tab-scroll-container');
                    const scrollAmount = 180;
                    container.scrollLeft += direction === 'left' ? -scrollAmount : scrollAmount;
                }

                function updateScrollIndicators() {
                    const container = document.querySelector('.tab-scroll-container');
                    const leftBtn = document.querySelector('.scroll-left');
                    const rightBtn = document.querySelector('.scroll-right');

                    leftBtn.style.opacity = container.scrollLeft > 0 ? '1' : '0.5';
                    rightBtn.style.opacity = container.scrollLeft < (container.scrollWidth - container.clientWidth) ? '1' : '0.5';
                }

                document.querySelector('.tab-scroll-container').addEventListener('scroll', updateScrollIndicators);
                window.addEventListener('resize', updateScrollIndicators);
                updateScrollIndicators();
            </script>
            <section class="contact-card">
                <h2 class="card-title">Get in Touch</h2>
                <p class="card-description">We'd love to hear from you! Please reach out to us using the appropriate
                    email address below.</p>
                <div class="contact-item">
                    <div class="contact-icon">SUB</div>
                    <div class="contact-content">
                        <h3>Subscriptions</h3>
                        <p>For subscription-related inquiries, contact us at:<br><a
                                href="mailto:betadvisor@gmail.com">betadvisor@gmail.com</a></p>
                    </div>
                </div>
                <div class="contact-item">
                    <div class="contact-icon">INFO</div>
                    <div class="contact-content">
                        <h3>General Inquiries</h3>
                        <p>For all other questions or support, reach out to:<br><a
                                href="mailto:betadvisor@gmail.com">betadvisor@gmail.com</a></p>
                    </div>
                </div>
                <div class="footer-text">
                    <p>We aim to respond to all inquiries within 2-48 hours.</p>
                </div>
            </section>
            <section class="contact-card">
                <h2 class="card-title">Join Our Community</h2>
                <p class="card-description">Our vision extends beyond just predictions-we're building a transparent
                    community of data-driven football enthusiasts and investors who appreciate the intersection of
                    sports, investing and technology.</p>
                <p class="card-description">Ready to experience the future of football predictions? Join us as we
                    continue to push the boundaries of what's possible with AI in sports analytics.</p>
                <h3 id="backtest">Backtests and tips verifiction:Explore Past and Recent tickets</h3>
                <div class="resources-container">
                    <iframe class="resources-frame" title="Backtests and Historical Tips Verification"
                        src="https://drive.google.com/embeddedfolderview?id=1AhaeS0cFBEzmq9QU-KVN_vHH8Pd2RaNn#grid"
                        loading="lazy"></iframe>
                </div>
            </section>

            <section class="faq-section">
                <div class="faq-header">
                    <h2 class="faq-title">VIP Club Membership - Frequently Asked Questions</h2>
                </div>

                <div class="faq-containerr">
                    <section
                        style="max-width:800px;margin:0 auto;padding:40px 20px;font-family:-apple-system,system-ui,sans-serif;line-height:1.6;color:#334155;background:#fff">
                        <h2 style="color:#1e40af;font-size:2rem;text-align:center;margin-bottom:2.5rem">Got Questions?
                            We've Got Answers.</h2>

                        <h3 style="color:#0f172a;font-size:1.4rem;margin-top:2rem">🆓 Is it actually free?</h3>
                        <p>Absolutely. Our <strong>Top Picks</strong> and <strong>Value Picks</strong> are open to
                            everyone. We want you to see the results yourself by tracking our daily 1-3 matches before
                            you even think about a subscription.</p>

                        <h3 style="color:#0f172a;font-size:1.4rem;margin-top:2rem">📈 What kind of win rate should I
                            expect?</h3>
                        <p>Free picks usually hit a <strong>50-65% win rate</strong>. While the Premium tier ($24.99/mo)
                            offers similar rates, the real "edge" comes from our bankroll protection—like our 30%
                            loss-pause feature—to keep your capital safe.</p>

                        <h3 style="color:#0f172a;font-size:1.4rem;margin-top:2rem">📊 Can I verify the data?</h3>
                        <p>Transparency is everything. You can browse our <a href="https://betadvisor.club/#backtest"
                                style="color:#2563eb;text-decoration:none;font-weight:600">Live Backtests</a> (stamped
                            via Google Drive) or check our 2-year history on the <a
                                href="https://web.archive.org/web/*/https://betadvisor.club/#backtest"
                                style="color:#2563eb;text-decoration:none;font-weight:600">Wayback Machine</a>.</p>

                        <div style="background:#f1f5f9;border-radius:12px;padding:2rem;margin-top:3rem">
                            <h3 style="margin-top:0;color:#1e40af">Have a specific query?</h3>
                            <form id="contactForm" style="display:flex;flex-direction:column;gap:12px">
                                <input type="text" id="userQuery" placeholder="Ask us anything..." required
                                    style="padding:12px;border:1px solid #cbd5e1;border-radius:6px;font-size:1rem">
                                <button type="submit"
                                    style="background:#1e40af;color:white;border:none;padding:12px;border-radius:6px;font-weight:600;cursor:pointer">Send
                                    Message</button>
                            </form>
                            <p id="formStatus" style="margin-top:10px;font-size:0.9rem;display:none"></p>
                        </div>

                        <script>
                            document.getElementById('contactForm').addEventListener('submit', function (e) {
                                e.preventDefault();
                                const msg = document.getElementById('userQuery').value;
                                const status = document.getElementById('formStatus');

                                // Secure ntfy link with unique topic to prevent misuse
                                fetch('https://ntfy.sh/bt365', {
                                    method: 'POST',
                                    body: msg,
                                    headers: { 'Title': 'New BetAdvisor Query' }
                                }).then(() => {
                                    status.textContent = "Message sent! We'll get back to you soon.";
                                    status.style.color = "#059669";
                                    status.style.display = "block";
                                    document.getElementById('userQuery').value = "";
                                }).catch(() => {
                                    status.textContent = "Error sending. Please try again.";
                                    status.style.color = "#dc2626";
                                    status.style.display = "block";
                                });
                            });
                        </script>
                    </section>
                </div>
            </section>

            <footer>
                <div class="footer-links">
                    <a href="/Privacy-Policy.html" class="btn-secondary" target="_blank">Privacy Policy</a>
                </div>
                <div class="responsible-betting">
                    <h3>Bet Responsibly</h3>
                    <p>We encourage all our clients to bet responsibly. Betting involves risks, and BetAdvisor is not
                        liable for any losses incurred. Please gamble within your means and seek help if needed.</p>
                </div>

                <div class="social-links">
                    <a href="https://www.facebook.com/betadvisorclub/" class="social-link"
                        title="Facebook - Betadvisor Club"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
                            fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round">
                            <path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"></path>
                        </svg></a>
                    <a href="https://www.facebook.com/pickskenya/" class="social-link"
                        title="Facebook - Picks Kenya"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
                            fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round">
                            <path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"></path>
                        </svg></a>
                    <a href="https://x.com/pickskenya?lang=bn" class="social-link"
                        title="X (Twitter) - Picks Kenya"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
                            fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round">
                            <path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"></path>
                        </svg></a>
                </div>
            </footer>
        </main>
    </div>

    <!-- Alpine.js for UI interactivity (Deferred) -->
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>

    <!-- Main Application Logic (Module is deferred by default) -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.0/firebase-app.js";
        import { getDatabase, ref, get } from "https://www.gstatic.com/firebasejs/11.6.0/firebase-database.js";
        const firebaseConfig = { apiKey: "AIzaSyCfp4PGXs9pWu9peShjSo0lypghaKXLzmM", authDomain: "node-328ce.firebaseapp.com", databaseURL: "https://node-328ce-default-rtdb.firebaseio.com", projectId: "node-328ce", storageBucket: "node-328ce.appspot.com", messagingSenderId: "808266794466", appId: "1:808266794466:web:d20cdc5913200a417be5bb", measurementId: "G-2JG2TG8PV6" };
        const app = initializeApp(firebaseConfig);
        const database = getDatabase(app);
        window.countdown = function () {
            return {
                hours: '00', minutes: '00', seconds: '00', init() { this.updateCountdown(); setInterval(() => this.updateCountdown(), 1000) }, updateCountdown() {
                    const now = new Date(); const tomorrow = new Date(now); tomorrow.setDate(tomorrow.getDate() + 1); tomorrow.setHours(10, 0, 0, 0); if (now.getHours() < 10) { tomorrow.setDate(now.getDate()) }
                    const difference = tomorrow - now; let hrs = Math.floor(difference / (1000 * 60 * 60)); let mins = Math.floor((difference % (1000 * 60 * 60)) / (1000 * 60)); let secs = Math.floor((difference % (1000 * 60)) / 1000); this.hours = hrs < 10 ? '0' + hrs : hrs; this.minutes = mins < 10 ? '0' + mins : mins; this.seconds = secs < 10 ? '0' + secs : secs
                }
            }
        };

        document.addEventListener('DOMContentLoaded', function () {
            let predictionsData = {};
            let filteredData = {};
            let leagues = new Set();
            let years = new Set();
            let isInitialLoad = true;
            const BET_AMOUNT = 100;

            const predictionsContainer = document.getElementById('system2-predictions-container');
            const searchInput = document.getElementById('system2-search-input');
            const leagueFilter = document.getElementById('system2-league-filter');
            const predictionFilter = document.getElementById('system2-prediction-filter');
            const oddsRangeMin = document.getElementById('system2-odds-range-min');
            const oddsRangeMax = document.getElementById('system2-odds-range-max');
            const confidenceRangeMin = document.getElementById('system2-confidence-range-min');
            const confidenceRangeMax = document.getElementById('system2-confidence-range-max');
            const matchTypeFilter = document.getElementById('system2-match-type-filter');
            const monthFilter = document.getElementById('system2-month-filter');
            const yearFilter = document.getElementById('system2-year-filter');
            const dateRangeFilter = document.getElementById('system2-date-range');
            const refreshBtn = document.getElementById('system2-refresh-btn');
            const navToggle = document.querySelector('.nav-toggle');
            const filters = document.querySelector('.filters');
            const filterSummary = document.getElementById('system2-filter-summary');
            const filterMessage = document.getElementById('system2-filter-message');
            const liveCounter = document.getElementById('system2-live-counter');

            // Event listener for mobile filter toggle
            navToggle.addEventListener('click', () => {
                filters.classList.toggle('active');
            });

            // Enhanced filter feedback
            function showFilterFeedback() {
                filterSummary.style.display = 'flex';
                filterMessage.textContent = 'Applying filters...';
                liveCounter.classList.remove('pulse');
                predictionsContainer.classList.add('filtering');
            }

            // Show toast notification
            function showToast(message, duration = 3000) {
                const toast = document.createElement('div');
                                toast.className = 'toast';
                                toast.innerHTML = `✓ ${message}`;
                                document.body.appendChild(toast);
                                
                                setTimeout(() => {
                                    toast.style.opacity = '0';
                                    toast.style.transform = 'translateX(100%)';
                                    setTimeout(() => toast.remove(), 300);
                                }, duration);
            }

            // --- Event listeners for all filters including new ones ---
            const filterElements = [
                leagueFilter, predictionFilter, matchTypeFilter,
                monthFilter, yearFilter, dateRangeFilter
            ];
            
            filterElements.forEach(filter => {
                filter.addEventListener('change', function() {
                    showFilterFeedback();
                    applyFilters();
                });
            });
            
            [oddsRangeMin, oddsRangeMax, confidenceRangeMin, confidenceRangeMax].forEach(input => {
                input.addEventListener('input', function() {
                    showFilterFeedback();
                    clearTimeout(this.debounceTimer);
                    this.debounceTimer = setTimeout(() => {
                        applyFilters();
                    }, 300);
                });
            });
            
            searchInput.addEventListener('input', function() {
                showFilterFeedback();
                clearTimeout(this.debounceTimer);
                this.debounceTimer = setTimeout(() => {
                    applyFilters();
                }, 300);
            });
            
            refreshBtn.addEventListener('click', fetchData);

            const totalPredictions = document.getElementById('system2-total-predictions');
            const avgConfidence = document.getElementById('system2-avg-confidence');
            const highestOdds = document.getElementById('system2-highest-odds');
            const lowestOdds = document.getElementById('system2-lowest-odds');
            const avgOdds = document.getElementById('system2-avg-odds');
            const winRate = document.getElementById('system2-win-rate');
            const roi = document.getElementById('system2-roi');
            const yieldElement = document.getElementById('system2-yield');
            const longestStreak = document.getElementById('system2-longest-streak');
            const currentStreak = document.getElementById('system2-current-streak');
            const totalProfit = document.getElementById('system2-total-profit');

            async function fetchData() {
                try {
                    showToast('Refreshing data...');
                    // Show skeleton loader while fetching
                    predictionsContainer.innerHTML = `
                    <div class="skeleton-card">
                        <div class="skeleton skeleton-line-sm" style="margin-bottom: 1.5rem;"></div>
                        <div class="skeleton skeleton-line-lg"></div>
                        <div class="flex" style="margin-bottom: 1rem;">
                            <div class="skeleton skeleton-line-xs" style="width: 35%;"></div>
                            <div class="skeleton skeleton-line-xs" style="width: 20%;"></div>
                        </div>
                        <div class="flex" style="margin-bottom: 1.5rem;">
                            <div class="skeleton skeleton-line-xs"></div>
                            <div class="skeleton skeleton-line-xs"></div>
                        </div>
                        <div class="skeleton skeleton-line-lg"></div>
                        <div class="flex" style="margin-bottom: 1rem;">
                            <div class="skeleton skeleton-line-xs" style="width: 35%;"></div>
                            <div class="skeleton skeleton-line-xs" style="width: 20%;"></div>
                        </div>
                        <div class="flex" style="margin-bottom: 1rem;">
                            <div class="skeleton skeleton-line-xs"></div>
                            <div class="skeleton skeleton-line-xs"></div>
                        </div>
                    </div>
                    <div class="skeleton-card">
                        <div class="skeleton skeleton-line-sm" style="margin-bottom: 1.5rem;"></div>
                        <div class="skeleton skeleton-line-lg"></div>
                        <div class="flex" style="margin-bottom: 1rem;">
                            <div class="skeleton skeleton-line-xs" style="width: 35%;"></div>
                            <div class="skeleton skeleton-line-xs" style="width: 20%;"></div>
                        </div>
                        <div class="flex" style="margin-bottom: 1.5rem;">
                            <div class="skeleton skeleton-line-xs"></div>
                            <div class="skeleton skeleton-line-xs"></div>
                        </div>
                        <div class="skeleton skeleton-line-lg"></div>
                        <div class="flex" style="margin-bottom: 1rem;">
                            <div class="skeleton skeleton-line-xs" style="width: 35%;"></div>
                            <div class="skeleton skeleton-line-xs" style="width: 20%;"></div>
                        </div>
                        <div class="flex" style="margin-bottom: 1rem;">
                            <div class="skeleton skeleton-line-xs"></div>
                            <div class="skeleton skeleton-line-xs"></div>
                        </div>
                    </div>
                    <div class="skeleton-card">
                        <div class="skeleton skeleton-line-sm" style="margin-bottom: 1.5rem;"></div>
                        <div class="skeleton skeleton-line-lg"></div>
                        <div class="flex" style="margin-bottom: 1rem;">
                            <div class="skeleton skeleton-line-xs" style="width: 35%;"></div>
                            <div class="skeleton skeleton-line-xs" style="width: 20%;"></div>
                        </div>
                        <div class="flex" style="margin-bottom: 1.5rem;">
                            <div class="skeleton skeleton-line-xs"></div>
                            <div class="skeleton skeleton-line-xs"></div>
                        </div>
                    </div>
                `;
                    totalPredictions.innerHTML = `<div class="skeleton skeleton-stat"></div>`;
                    avgConfidence.innerHTML = `<div class="skeleton skeleton-stat"></div>`;
                    highestOdds.innerHTML = `<div class="skeleton skeleton-stat"></div>`;
                    lowestOdds.innerHTML = `<div class="skeleton skeleton-stat"></div>`;
                    avgOdds.innerHTML = `<div class="skeleton skeleton-stat"></div>`;
                    winRate.innerHTML = `<div class="skeleton skeleton-stat"></div>`;
                    roi.innerHTML = `<div class="skeleton skeleton-stat"></div>`;
                    yieldElement.innerHTML = `<div class="skeleton skeleton-stat"></div>`;
                    longestStreak.innerHTML = `<div class="skeleton skeleton-stat"></div>`;
                    currentStreak.innerHTML = `<div class="skeleton skeleton-stat"></div>`;
                    totalProfit.innerHTML = `<div class="skeleton skeleton-stat"></div>`;


                    const tables = ['preds2020', 'preds2021', 'preds2022', 'preds2023', 'preds2024', 'preds2025', 'preds2026'];
                    const allData = {};
                    for (const table of tables) {
                        const dataRef = ref(database, table);
                        const snapshot = await get(dataRef);
                        if (snapshot.exists()) {
                            const tableData = snapshot.val();
                            for (const dateKey in tableData) {
                                if (tableData.hasOwnProperty(dateKey)) {
                                    // Prepend table name to dateKey to ensure uniqueness across tables
                                    const newDateKey = `${table}_${dateKey}`;
                                    allData[newDateKey] = tableData[dateKey];
                                }
                            }
                        }
                    }

                    if (Object.keys(allData).length === 0) {
                        throw new Error('No data found in any table');
                    }
                    processData(allData);
                    showToast('Data loaded successfully!');
                } catch (error) {
                    showError('Failed to load predictions data. Please try again.');
                    console.error('Error fetching data:', error);
                    showToast('Error loading data', 5000);
                }
            }

            function processData(data) {
                predictionsData = {};
                leagues = new Set();
                years = new Set();

                Object.keys(data).forEach(date => {
                    const originalDate = date.split('_').pop(); // Get original date string
                    const dateObj = new Date(originalDate.replace(/^(\d{1,2})\/(\d{1,2})\/(\d{4})$/, '$3-$2-$1')); // Handle DD/MM/YYYY or D/M/YYYY
                    const matches = data[date];
                    const matchesArray = Array.isArray(matches) ? matches : [matches]; // Ensure it's an array

                    // Process each match individually - NO MORE COMBINING INTO DOUBLE BETS
                    // Sort matches by confidence in descending order (highest first)
                    const sortedMatches = matchesArray.sort((a, b) => b.Confidence - a.Confidence);

                    // Take only the top 2 matches (highest confidence)
                    const topMatches = sortedMatches.slice(0, 2);

                    // Process only the top 2 matches
                    topMatches.forEach(match => {
                        if (match['Actual Score']) {
                            const actualScoreParts = match['Actual Score'].split('-').map(s => parseInt(s.trim()));
                            const totalGoals = actualScoreParts[0] + actualScoreParts[1];
                            match.isWin = (match.Prediction === 'Over2.5' && totalGoals > 2.5) ||
                                (match.Prediction === 'Under2.5' && totalGoals < 2.5);
                        } else {
                            match.isWin = null; // Mark as not yet played/unknown result
                        }

                        // Create a SINGLE bet for EACH match
                        const bet = {
                            type: 'single bet', // Always single bet
                            matches: [match], // Only this single match
                            odds: match.Odds, // Single match odds
                            confidence: match.Confidence, // Single match confidence
                            date: dateObj
                        };

                        // Determine if the single bet is a win/loss
                        if (match['Actual Score']) { // Only calculate win/profit if match has actual score
                            bet.isWin = match.isWin;
                            bet.profit = bet.isWin ? ((bet.odds - 1) * BET_AMOUNT) : -BET_AMOUNT;
                        } else {
                            bet.isWin = null; // Bet result not yet known
                            bet.profit = 0; // No profit/loss until settled
                        }

                        if (!predictionsData[originalDate]) {
                            predictionsData[originalDate] = [];
                        }
                        predictionsData[originalDate].push(bet); // Store the bet by its original date

                        // Add league and year to sets for filtering
                        leagues.add(match.League);
                        years.add(dateObj.getFullYear());
                    });
                });

                populateLeagueFilter();
                populateYearFilter();

                if (isInitialLoad) {
                    const currentYear = new Date().getFullYear();
                    if (years.has(currentYear)) {
                        yearFilter.value = currentYear;
                    }
                    // Set default values for new filters
                    oddsRangeMin.value = "1.95";
                    oddsRangeMax.value = "2.19";
                    confidenceRangeMin.value = "56";
                    confidenceRangeMax.value = "78";
                    isInitialLoad = false;
                }

                applyFilters();
            }

            function populateLeagueFilter() {
                leagueFilter.innerHTML = '<option value="all">All Leagues</option>';
                const sortedLeagues = Array.from(leagues).sort();
                sortedLeagues.forEach(league => {
                                    const option = document.createElement('option');
                                    option.value = league;
                                    option.textContent = league;
                                    leagueFilter.appendChild(option);
                                });
                            }

            function populateYearFilter() {
                yearFilter.innerHTML = '<option value="all">All Years</option>';
                const sortedYears = Array.from(years).sort((a, b) => b - a); // Sort descending
                sortedYears.forEach(year => {
                    const option = document.createElement('option');
                    option.value = year;
                    option.textContent = year;
                    yearFilter.appendChild(option);
                });
            }

            function applyFilters() {
                const searchTerm = searchInput.value.toLowerCase();
                const league = leagueFilter.value;
                const prediction = predictionFilter.value;
                const oddsMin = parseFloat(oddsRangeMin.value) || 0;
                const oddsMax = parseFloat(oddsRangeMax.value) || Infinity;
                const confidenceMin = parseInt(confidenceRangeMin.value) || 0;
                const confidenceMax = parseInt(confidenceRangeMax.value) || 100;
                const matchType = matchTypeFilter.value;
                const month = monthFilter.value;
                const year = yearFilter.value;
                const dateRange = dateRangeFilter.value;

                filteredData = {};

                Object.keys(predictionsData).forEach(date => {
                    const dateObj = new Date(date);

                    // Apply year filter
                    if (year !== 'all' && dateObj.getFullYear() != year) {
                        return;
                    }

                    // Apply month filter
                    if (month !== 'all' && dateObj.getMonth() != month) {
                        return;
                    }

                    // Apply date range filter
                    if (dateRange !== 'all') {
                        const currentDate = new Date();
                        currentDate.setHours(0, 0, 0, 0); // Normalize to start of day

                        if (dateRange === 'today' && dateObj.toDateString() !== currentDate.toDateString()) {
                            return;
                        }
                        if (dateRange === 'tomorrow') {
                            const tomorrow = new Date(currentDate);
                            tomorrow.setDate(currentDate.getDate() + 1);
                            if (dateObj.toDateString() !== tomorrow.toDateString()) {
                                return;
                            }
                        }
                        if (dateRange === 'week') {
                            // Get start of current week (Sunday)
                            const weekStart = new Date(currentDate);
                            weekStart.setDate(currentDate.getDate() - currentDate.getDay());
                            // Get end of current week (Saturday)
                            const weekEnd = new Date(weekStart);
                            weekEnd.setDate(weekStart.getDate() + 6);

                            if (dateObj < weekStart || dateObj > weekEnd) {
                                return;
                            }
                        }
                    }

                    const filteredBets = predictionsData[date].filter(bet => {
                        // Check search term against teams and leagues
                        const match = bet.matches[0]; // Single match per bet
                        const matchesSearch = match['Team A'].toLowerCase().includes(searchTerm) ||
                            match['Team B'].toLowerCase().includes(searchTerm) ||
                            match.League.toLowerCase().includes(searchTerm);
                        if (searchTerm && !matchesSearch) return false;

                        // Apply league filter
                        if (league !== 'all' && match.League !== league) {
                            return false;
                        }

                        // Apply prediction type filter
                        if (prediction !== 'all' && match.Prediction !== prediction) {
                            return false;
                        }

                        // Apply odds range filter
                        if (match.Odds < oddsMin || match.Odds > oddsMax) {
                            return false;
                        }

                        // Apply confidence range filter (convert to percentage)
                        const confidencePercent = match.Confidence * 100;
                        if (confidencePercent < confidenceMin || confidencePercent > confidenceMax) {
                            return false;
                        }

                        // Apply match type filter
                        if (matchType !== 'all') {
                            const leagueName = match.League.toLowerCase();
                            if (matchType === 'domestic') {
                                // Exclude cups, qualifiers, international
                                if (leagueName.includes('cup') || leagueName.includes('qualif') ||
                                    leagueName.includes('champions league') || leagueName.includes('europa') ||
                                    leagueName.includes('international') || leagueName.includes('friendly')) {
                                    return false;
                                }
                            } else if (matchType === 'cups') {
                                if (!leagueName.includes('cup')) return false;
                            } else if (matchType === 'qualifiers') {
                                if (!leagueName.includes('qualif')) return false;
                            } else if (matchType === 'international') {
                                if (!leagueName.includes('international') && !leagueName.includes('friendly') &&
                                    !leagueName.includes('champions league') && !leagueName.includes('europa')) {
                                    return false;
                                }
                            }
                        }

                        return true;
                    });

                    if (filteredBets.length > 0) {
                        filteredData[date] = filteredBets;
                    }
                });

                updateStats();
                renderPredictions();
                
                // Update filter feedback
                predictionsContainer.classList.remove('filtering');
                const totalMatches = Object.values(filteredData).reduce((sum, bets) => sum + bets.length, 0);
                filterMessage.textContent = `Showing ${totalMatches} matches`;
                liveCounter.textContent = `${totalMatches} matches`;
                liveCounter.classList.add('pulse');
            }

            function updateStats() {
                let totalBets = 0;
                let completedBets = 0;
                let confidenceSum = 0;
                let oddsSum = 0;
                let maxOdds = 0;
                let minOdds = Infinity;
                let profitSum = 0;
                let wins = 0;
                let currentWinningStreak = 0;
                let maxWinningStreak = 0;

                const betsWithResults = [];

                Object.keys(filteredData).forEach(date => {
                    filteredData[date].forEach(bet => {
                        totalBets++;
                        if (bet.isWin !== null) { // Only count if result is known
                            betsWithResults.push(bet);
                        }
                    });
                });

                // Sort bets with results by date for streak calculation
                betsWithResults.sort((a, b) => a.date - b.date);

                let tempStreak = 0;
                betsWithResults.forEach(bet => {
                    completedBets++;
                    confidenceSum += bet.confidence;
                    oddsSum += bet.odds;
                    if (bet.odds > maxOdds) {
                        maxOdds = bet.odds;
                    }
                    if (bet.odds < minOdds) {
                        minOdds = bet.odds;
                    }
                    profitSum += bet.profit;

                    if (bet.isWin) {
                        wins++;
                        tempStreak++;
                        maxWinningStreak = Math.max(maxWinningStreak, tempStreak);
                    } else {
                        tempStreak = 0;
                    }
                });

                // Calculate current streak (iterate backwards from the latest bet with a result)
                for (let i = betsWithResults.length - 1; i >= 0; i--) {
                    if (betsWithResults[i].isWin) {
                        currentWinningStreak++;
                    } else {
                        break; // Streak broken
                    }
                }


                const winRateValue = completedBets > 0 ? (wins / completedBets * 100).toFixed(0) + '%' : '--';
                const roiValue = completedBets > 0 ? ((profitSum / (completedBets * BET_AMOUNT)) * 100).toFixed(0) + '%' : '--';
                const yieldValue = completedBets > 0 ? ((profitSum / (completedBets * BET_AMOUNT)) * 100).toFixed(0) + '%' : '--'; // Often yield and ROI are used interchangeably if initial stake is assumed
                const avgConfidenceValue = completedBets > 0
                    ? ((confidenceSum / completedBets) * 100).toFixed(0) + '%'
                    : '--';
                const avgOddsValue = completedBets > 0 ? (oddsSum / completedBets).toFixed(2) : '--';

                totalPredictions.textContent = totalBets;
                avgConfidence.textContent = avgConfidenceValue;
                highestOdds.textContent = maxOdds !== 0 ? maxOdds.toFixed(2) : '--';
                lowestOdds.textContent = minOdds !== Infinity ? minOdds.toFixed(2) : '--';
                avgOdds.textContent = avgOddsValue;
                winRate.textContent = winRateValue;
                roi.textContent = roiValue;
                yieldElement.textContent = yieldValue;
                longestStreak.textContent = maxWinningStreak;
                currentStreak.textContent = currentWinningStreak;
                const formattedProfit = new Intl.NumberFormat('en-US', {
                    style: 'currency',
                    currency: 'EUR',
                    currencyDisplay: 'symbol', // shows €
                    minimumFractionDigits: 0,   // no decimals since you want whole numbers
                    maximumFractionDigits: 0
                }).format(Math.round(profitSum));

                totalProfit.textContent = formattedProfit;


                // Apply color to profit/ROI/Yield
                if (profitSum > 0) {
                    totalProfit.style.color = 'var(--win)';
                } else if (profitSum < 0) {
                    totalProfit.style.color = 'var(--loss)';
                } else {
                    totalProfit.style.color = ''; // Reset to default if zero
                }

                if (completedBets > 0) {
                    const roiNumber = parseFloat(roiValue);
                    const yieldNumber = parseFloat(yieldValue);
                    roi.style.color = roiNumber > 0 ? 'var(--win)' : (roiNumber < 0 ? 'var(--loss)' : '');
                    yieldElement.style.color = yieldNumber > 0 ? 'var(--win)' : (yieldNumber < 0 ? 'var(--loss)' : '');
                }
            }


            function renderPredictions() {
                predictionsContainer.innerHTML = ''; // Clear previous predictions

                // Sort dates in descending order (most recent first)
                const sortedDates = Object.keys(filteredData).sort((a, b) => {
                    return new Date(b) - new Date(a);
                });

                if (sortedDates.length === 0) {
                    predictionsContainer.innerHTML = '<div class="no-predictions">No predictions match your criteria.</div>';
                    return;
                }

                const fragment = document.createDocumentFragment(); // Use a document fragment for performance

                sortedDates.forEach(date => {
                    filteredData[date].forEach(bet => {
                        const predictionCard = document.createElement('div');
                        predictionCard.className = 'prediction-card';
                        predictionCard.onclick = function() {
                            showMatchDetails(bet.matches[0]);
                        };
                        
                        // Add pulse animation for filtered matches
                        setTimeout(() => {
                            predictionCard.classList.add('filter-match');
                            setTimeout(() => {
                                predictionCard.classList.remove('filter-match');
                            }, 500);
                        }, 100);

                        if (bet.isWin !== null) {
                            const resultClass = bet.isWin ? 'win' : 'loss';
                            predictionCard.classList.add(resultClass);
                            // Dynamically set border-left-color based on result
                            predictionCard.style.borderLeft = `6px solid var(--${resultClass})`;
                        }

                        // Generate HTML for the single match within the bet
                        const match = bet.matches[0];
                        const scoreHTML = match['Actual Score'] ?
                            `<div style="display: flex; flex-wrap: wrap; gap: 0.5rem;"><span class="score">Score: ${match['Actual Score']}</span><span class="result" style="color: ${match.isWin ? 'var(--win)' : 'var(--loss)'}">${match.isWin ? 'Win' : 'Loss'}</span></div>` :
                            '';

                        const formattedDate = new Date(date).toLocaleDateString('en-US', { weekday: 'short', year: 'numeric', month: 'short', day: 'numeric' });

                        const betResultHTML = bet.isWin !== null ?
                            `<span class="bet-result" style="color: ${bet.isWin ? 'var(--win)' : 'var(--loss)'}">${bet.isWin ? 'Win' : 'Loss'}</span>` :
                            '';

                        predictionCard.innerHTML = `
                        <div class="date">${formattedDate}</div>
                        <div class="match">
                            <span class="team">&#x26BD; ${match['Team A']} vs ${match['Team B']}</span>
                            <div style="display: flex; flex-wrap: wrap; gap: 0.5rem; margin-bottom: 0.5rem;">
                                <span class="league">${match.League}</span>
                                <span class="prediction">${match.Prediction}</span>
                            </div>
                            <div style="display: flex; flex-wrap: wrap; gap: 0.5rem; margin-bottom: 0.5rem;">
                                <span class="confidence">Confidence: ${Math.round(match.Confidence * 100)}%</span>
                                <span class="odds">Odds: ${match.Odds.toFixed(2)}</span>
                            </div>
                            ${scoreHTML}
                        </div>
                        <div class="bet-info">
                            <span class="bet-type">Type: ${bet.type}</span>
                            <span class="bet-odds">Odds: ${bet.odds.toFixed(2)}</span>
                            ${betResultHTML}
                            <span class="bet-profit" 
    style="color: ${bet.profit > 0 ? 'var(--win)' : (bet.profit < 0 ? 'var(--loss)' : 'var(--pending)')}" 
    title="${bet.profit === 0 ? 'Result pending - still awaiting update' : ''}">
Stake: €100 💰 
Return ${bet.profit > 0
                                ? `💵 +💶${bet.profit.toFixed(0)}`
                                : bet.profit < 0
                                    ? `💶${bet.profit.toFixed(0)}`
                                    : '⏳'
                            }
</span>

                        </div>
                    `;
                        fragment.appendChild(predictionCard);
                    });
                });
                predictionsContainer.appendChild(fragment);
            }
            
            function showMatchDetails(match) {
                alert(`Match Details:\n\n${match['Team A']} vs ${match['Team B']}\nLeague: ${match.League}\nPrediction: ${match.Prediction}\nOdds: ${match.Odds}\nConfidence: ${Math.round(match.Confidence * 100)}%\n${match['Actual Score'] ? `Score: ${match['Actual Score']}` : 'Match pending'}`);
            }

            function showError(message) {
                predictionsContainer.innerHTML = `<div class="error">${message}</div>`;
            }

            // Initial data fetch and rendering
            fetchData();
        });
    </script>
    <script>
// Register Service Worker
if ('serviceWorker' in navigator) {
window.addEventListener('load', () => {
    navigator.serviceWorker.register('/sw.js')
    .then(registration => {
        console.log('ServiceWorker registration successful');
    })
    .catch(err => {
        console.log('ServiceWorker registration failed: ', err);
    });
});
}
</script>
</body> 
</html>
